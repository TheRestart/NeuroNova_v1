# NeuroNova CDSS - ì´ˆê¸° ë°ì´í„° ì‹œë”© ê°€ì´ë“œ

**ì‘ì„±ì¼**: 2026-01-01
**ë²„ì „**: 1.0
**ëª©ì **: Docker í†µí•© í™˜ê²½ì—ì„œ ë°ì´í„° ì•„í‚¤í…ì²˜ë¥¼ ì¤€ìˆ˜í•˜ì—¬ ì´ˆê¸° ë°ì´í„°ë¥¼ ì •í™•í•˜ê²Œ ì‹œë”©í•˜ëŠ” ë°©ë²•

---

## ğŸ“‹ ëª©ì°¨

1. [ê°œìš”](#ê°œìš”)
2. [ë°ì´í„° ì €ì¥ì†Œ êµ¬ì¡°](#ë°ì´í„°-ì €ì¥ì†Œ-êµ¬ì¡°)
3. [ë¹ ë¥¸ ì‹œì‘ (4ë‹¨ê³„)](#ë¹ ë¥¸-ì‹œì‘-4ë‹¨ê³„)
4. [ë°ì´í„° ì‹œë”© ìƒì„¸](#ë°ì´í„°-ì‹œë”©-ìƒì„¸)
5. [ê²€ì¦ ë° í™•ì¸](#ê²€ì¦-ë°-í™•ì¸)
6. [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)

---

## ğŸ¯ ê°œìš”

NeuroNova CDSSëŠ” **4ê°œì˜ ë°ì´í„° ì €ì¥ì†Œ**ë¥¼ ì‚¬ìš©í•˜ë©°, ê° ì €ì¥ì†ŒëŠ” ëª…í™•í•œ ì—­í• ê³¼ ì±…ì„ì„ ê°€ì§‘ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    NeuroNova CDSS ë°ì´í„° ì €ì¥ì†Œ                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Django MySQL â”‚  â”‚ OpenEMR      â”‚  â”‚ HAPI     â”‚  â”‚ Orthanc  â”‚  â”‚
â”‚  â”‚ (Cache/Data) â”‚  â”‚ (EMR Detail) â”‚  â”‚ FHIR     â”‚  â”‚ (DICOM)  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                    â”‚
â”‚  â€¢ ë¹ ë¥¸ ì¡°íšŒ      â€¢ ìƒì„¸ EMR      â€¢ í‘œì¤€ êµí™˜    â€¢ ì˜ë£Œ ì˜ìƒ    â”‚
â”‚  â€¢ ë¦¬ìŠ¤íŠ¸        â€¢ ì§„ë£Œ ê¸°ë¡      â€¢ ì™¸ë¶€ ì—°ë™    â€¢ PACS         â”‚
â”‚  â€¢ ìœ ì „ ì •ë³´      â€¢ ì²˜ë°© ìƒì„¸      â€¢ FHIR R4     â€¢ DICOM        â”‚
â”‚  â€¢ AI ê²°ê³¼                                                       â”‚
â”‚                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì‹œë”© ëª©í‘œ

- âœ… **Django MySQL**: ê¸°ë³¸ ì •ë³´ + ì™„ì „ ë°ì´í„° (EMR ìºì‹œ, LIS ì „ì²´, AI ê²°ê³¼)
- âœ… **OpenEMR**: í™˜ì ìƒì„¸ ì •ë³´ (ê³¼ê±° ë³‘ë ¥, ê°€ì¡±ë ¥ ë“±)
- âœ… **HAPI FHIR**: í‘œì¤€ êµí™˜ ë¦¬ì†ŒìŠ¤ (ìë™ ë™ê¸°í™”)
- âœ… **Orthanc PACS**: DICOM ìƒ˜í”Œ ì´ë¯¸ì§€

---

## ğŸ—ï¸ ë°ì´í„° ì €ì¥ì†Œ êµ¬ì¡°

### 1. Django MySQL (Cache + Full Data)

**ì €ì¥ ë°ì´í„°**:
| í…Œì´ë¸” | ìš©ë„ | ë°ì´í„° íŠ¹ì„± |
|--------|------|------------|
| `emr_patient_cache` | í™˜ì ê¸°ë³¸ ì •ë³´ | **ìºì‹œ** (OpenEMRê³¼ ë™ê¸°í™”) |
| `emr_encounters` | ì§„ë£Œ ê¸°ë¡ | **ìºì‹œ** (OpenEMRê³¼ ë™ê¸°í™”) |
| `ocs_orders` | ì²˜ë°© ì£¼ë¬¸ | **ìºì‹œ** (OpenEMRê³¼ ë™ê¸°í™”) |
| `lis_lab_results` | ê²€ì‚¬ ê²°ê³¼ | **ì™„ì „ ë°ì´í„°** (ìœ ì „ ì •ë³´ í¬í•¨) |
| `ai_aijob` | AI ì¶”ë¡  ê²°ê³¼ | **ì™„ì „ ë°ì´í„°** (í…ìŠ¤íŠ¸/ìˆ«ì) |
| `ris_radiology_study` | ì˜ìƒ ë©”íƒ€ë°ì´í„° | **ì™„ì „ ë°ì´í„°** (Orthanc ë™ê¸°í™”) |

### 2. OpenEMR MySQL (EMR Detail)

**ì €ì¥ ë°ì´í„°**:
- í™˜ì ìƒì„¸ ì •ë³´ (ê³¼ê±° ë³‘ë ¥, ê°€ì¡±ë ¥, ì‚¬íšŒë ¥, ì§ì—…, í˜ˆì•¡í˜•, ê²°í˜¼ ìƒíƒœ)
- ì§„ë£Œ ê¸°ë¡ ìƒì„¸ (SOAP Note, ì¹˜ë£Œ ê³„íš)
- ì²˜ë°© ìƒì„¸ ì •ë³´ (ì•½ë¬¼ ìƒí˜¸ì‘ìš©, ì•Œë ˆë¥´ê¸° ì²´í¬)

**ë§¤í•‘ í•„ë“œ**:
- `PatientCache.openemr_patient_id` â†” OpenEMR Patient ID

### 3. HAPI FHIR R4 (Standard Exchange)

**ì €ì¥ ë°ì´í„°**:
- `Patient`: PatientCacheì—ì„œ ìë™ ë™ê¸°í™”
- `Encounter`, `MedicationRequest` (TODO)

**ë™ê¸°í™” ë°©ì‹**:
- Django signals (post_save, post_delete)ë¡œ ìë™

### 4. Orthanc PACS (DICOM Storage)

**ì €ì¥ ë°ì´í„°**:
- DICOM ì›ë³¸ ì´ë¯¸ì§€ (CT, MRI, X-Ray)
- AI ìƒì„± Segmentation (ì˜ì‚¬ ìŠ¹ì¸ í›„)

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘ (4ë‹¨ê³„)

### ì „ì œ ì¡°ê±´

```powershell
# ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd d:\1222\NeuroNova_v1

# Docker í†µí•© í™˜ê²½ ì‹œì‘
docker-compose -f docker-compose.dev.yml up -d

# ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸ (ëª¨ë‘ healthy/running)
docker-compose -f docker-compose.dev.yml ps
```

---

### Step 1: í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì ìƒì„±

```powershell
docker-compose -f docker-compose.dev.yml exec django python manage.py create_test_users
```

**ìƒì„±ë˜ëŠ” ê³„ì •**:
| ì—­í•  | Username | Password | ë¹„ê³  |
|------|----------|----------|------|
| Admin | admin | admin123!@# | ì‹œìŠ¤í…œ ê´€ë¦¬ì |
| Doctor | doctor | doctor123!@# | ì˜ì‚¬ |
| Nurse | nurse | nurse123!@# | ê°„í˜¸ì‚¬ |
| Patient | patient | patient123!@# | í™˜ì |
| Radiologist | radiologist | rib123!@# | ì˜ìƒì˜í•™ê³¼ |
| Lab Tech | labtech | lab123!@# | ì„ìƒë³‘ë¦¬ì‚¬ |

**ì¶œë ¥ ì˜ˆì‹œ**:
```
[SUCCESS] Updated user: admin (admin)
[SUCCESS] Updated user: doctor (doctor)
...
[SUMMARY] 13 users updated
```

---

### Step 2: Django MySQL ìƒ˜í”Œ ë°ì´í„° ìƒì„±

```powershell
# ê¸°ë³¸ ì‚¬ìš© (ê¸°ì¡´ ë°ì´í„° ìœ ì§€)
docker-compose -f docker-compose.dev.yml exec django python manage.py seed_initial_data

# ì „ì²´ ì¬ìƒì„± (ê¸°ì¡´ ë°ì´í„° ì‚­ì œ)
docker-compose -f docker-compose.dev.yml exec django python manage.py seed_initial_data --reset
```

**ìƒì„±ë˜ëŠ” ë°ì´í„°**:
- ğŸ‘¥ **ì‚¬ìš©ì**: 7ê°œ ì—­í•  Ã— 1ëª… = 7ëª…
- ğŸ¥ **í™˜ì**: 5ëª… (P-2025-001 ~ P-2025-005)
  - `openemr_patient_id` í•„ë“œ í¬í•¨ (OpenEMR ë§¤í•‘ìš©)
  - `fhir_id` í•„ë“œ ìë™ ì„¤ì • (HAPI FHIR ë™ê¸°í™”)

**ì¶œë ¥ ì˜ˆì‹œ**:
```
============================================================
[START] Initial Data Seeding
============================================================

[STEP 1/4] Creating Users...
   [OK] User created: admin (admin)
   [OK] User created: doctor1 (doctor)
   ...

[STEP 2/4] Creating Patients (Django MySQL)...
   [OK] Patient created: P-2025-001 - Kim MinJun
   [INFO] openemr_patient_id: OPENEMR_P-2025-001
   [INFO] FHIR sync queued: uuid-abc-123
   ...

[STEP 3/4] Syncing to OpenEMR (Outbox pattern)...
   [INFO] 5 patients queued for OpenEMR sync
   [INFO] Celery worker will process in background

[STEP 4/4] Verifying FHIR sync...
   [OK] FHIR Patient created: fhir-123

============================================================
[SUMMARY] Data Seeding Complete
============================================================

[Django MySQL] PatientCache: 5 patients
[OpenEMR Sync] Outbox: 5 pending
[HAPI FHIR] Patient: 5 resources
[Users] Total: 13 users

============================================================
[NEXT STEPS]
============================================================
1. Wait 1-2 minutes for OpenEMR background sync
2. Verify sync status: GET /api/patients/
3. Upload DICOM samples (optional)

============================================================
```

---

### Step 3: OpenEMR ë™ê¸°í™” í™•ì¸

```powershell
# Outbox ìƒíƒœ í™•ì¸
docker-compose -f docker-compose.dev.yml exec django python manage.py check_sync_status

# ìˆ˜ë™ ì¬ì‹œë„ (í•„ìš” ì‹œ)
docker-compose -f docker-compose.dev.yml exec django python manage.py retry_failed_outbox
```

**ì˜ˆìƒ ì¶œë ¥**:
```
============================================================
[Sync Status Report]
============================================================

[Outbox Status]
   Pending: 0
   Processing: 0
   Done: 5
   Failed: 0

[Recent Syncs]
   P-2025-001 â†’ OpenEMR: SUCCESS (openemr-patient-456)
   P-2025-002 â†’ OpenEMR: SUCCESS (openemr-patient-457)
   P-2025-003 â†’ OpenEMR: SUCCESS (openemr-patient-458)
   P-2025-004 â†’ OpenEMR: SUCCESS (openemr-patient-459)
   P-2025-005 â†’ OpenEMR: SUCCESS (openemr-patient-460)

============================================================
[RESULT] All syncs completed successfully
============================================================
```

---

### Step 4: DICOM ìƒ˜í”Œ ì—…ë¡œë“œ (ì„ íƒì‚¬í•­)

```powershell
# Dry-run ëª¨ë“œ (íŒŒì¼ ê²€ì‚¬ë§Œ)
docker-compose -f docker-compose.dev.yml exec django python manage.py upload_sample_dicoms --dry-run

# ì‹¤ì œ ì—…ë¡œë“œ
docker-compose -f docker-compose.dev.yml exec django python manage.py upload_sample_dicoms
```

**ê²€ì¶œëœ íŒŒì¼**: 1,860ê°œ DICOM íŒŒì¼ (sub-0004, sub-0005)

**ì¶œë ¥ ì˜ˆì‹œ**:
```
[INFO] Scanning DICOM files in: /app/../sample_dicoms
[INFO] Orthanc URL: http://orthanc:8042

[INFO] Scanning sub-0004...
[INFO] Scanning sub-0005...

[SUMMARY] Found 1,860 DICOM files
[STATS] sub-0004: 930 files
[STATS] sub-0005: 930 files

[UPLOAD] Uploading to Orthanc...
[PROGRESS] 100/1860 (5%)
[PROGRESS] 500/1860 (27%)
[PROGRESS] 1000/1860 (54%)
[PROGRESS] 1500/1860 (81%)
[PROGRESS] 1860/1860 (100%)

[DONE] Successfully uploaded 1,860 DICOM files
```

---

## ğŸ“¦ ë°ì´í„° ì‹œë”© ìƒì„¸

### ì‹œë”© ìŠ¤í¬ë¦½íŠ¸: `seed_initial_data.py`

**íŒŒì¼ ìœ„ì¹˜**: `acct/management/commands/seed_initial_data.py`

**ê¸°ëŠ¥**:
1. **ì‚¬ìš©ì ìƒì„±**: 7ê°œ ì—­í•  ì‚¬ìš©ì
2. **í™˜ì ìƒì„± (Django MySQL)**:
   - `PatientCache` ëª¨ë¸ì— ê¸°ë³¸ ì •ë³´ ì €ì¥
   - `openemr_patient_id` í•„ë“œ ì„¤ì • (ì˜ˆ: `OPENEMR_P-2025-001`)
3. **Outbox ë ˆì½”ë“œ ìƒì„±**:
   - OpenEMR ë™ê¸°í™” ì‘ì—… ì˜ˆì•½
   - `emr_sync_outbox` í…Œì´ë¸”ì— ì €ì¥
4. **FHIR ìë™ ë™ê¸°í™”**:
   - Django signalsê°€ ìë™ìœ¼ë¡œ HAPI FHIRì— Patient ë¦¬ì†ŒìŠ¤ ìƒì„±

### í™˜ì ID í˜•ì‹ í‘œì¤€

**Django MySQL**:
- `patient_id`: `P-2025-001` (í•˜ì´í”ˆ í¬í•¨, ISO 8601 ìœ ì‚¬)

**OpenEMR ë§¤í•‘**:
- `openemr_patient_id`: `OPENEMR_P-2025-001` (ì ‘ë‘ì‚¬ ì¶”ê°€)

**HAPI FHIR ë§¤í•‘**:
- `fhir_id`: `fhir-uuid-xxx` (ìë™ ìƒì„±)

### ìƒ˜í”Œ í™˜ì ë°ì´í„°

| Patient ID | Name | Birth Date | Gender | Blood Type | OpenEMR ID |
|------------|------|------------|--------|------------|------------|
| P-2025-001 | Kim MinJun | 1985-05-15 | male | A+ | OPENEMR_P-2025-001 |
| P-2025-002 | Lee SeoYun | 1990-08-22 | female | B+ | OPENEMR_P-2025-002 |
| P-2025-003 | Park JiHoon | 1978-03-10 | male | O+ | OPENEMR_P-2025-003 |
| P-2025-004 | Choi YeJin | 1995-11-30 | female | AB+ | OPENEMR_P-2025-004 |
| P-2025-005 | Jung DoHyun | 1982-07-18 | male | A- | OPENEMR_P-2025-005 |

---

## âœ… ê²€ì¦ ë° í™•ì¸

### 1. Django MySQL í™•ì¸

```powershell
# Django shell ì§„ì…
docker-compose -f docker-compose.dev.yml exec django python manage.py shell

# Python shellì—ì„œ ì‹¤í–‰
from emr.models import PatientCache
from emr.models import SyncOutbox

# í™˜ì ìˆ˜ í™•ì¸
print(f"Total patients: {PatientCache.objects.count()}")

# OpenEMR ë§¤í•‘ í™•ì¸
for patient in PatientCache.objects.all():
    print(f"{patient.patient_id} â†’ {patient.openemr_patient_id}")

# Outbox ìƒíƒœ í™•ì¸
outbox = SyncOutbox.objects.filter(entity_type='patient')
print(f"Outbox records: {outbox.count()}")
for record in outbox:
    print(f"  {record.entity_id}: {record.status}")
```

**ì˜ˆìƒ ì¶œë ¥**:
```
Total patients: 5
P-2025-001 â†’ OPENEMR_P-2025-001
P-2025-002 â†’ OPENEMR_P-2025-002
P-2025-003 â†’ OPENEMR_P-2025-003
P-2025-004 â†’ OPENEMR_P-2025-004
P-2025-005 â†’ OPENEMR_P-2025-005

Outbox records: 5
  P-2025-001: done
  P-2025-002: done
  P-2025-003: done
  P-2025-004: done
  P-2025-005: done
```

---

### 2. OpenEMR í™•ì¸

```powershell
# OpenEMR ì»¨í…Œì´ë„ˆ ë‚´ë¶€ MySQL ì ‘ì†
docker-compose -f docker-compose.dev.yml exec openemr-mysql mysql -u openemr -popenemr openemr

# SQL ì¿¼ë¦¬ ì‹¤í–‰
SELECT id, pubpid, fname, lname, DOB, sex
FROM patient_data
WHERE pubpid LIKE 'OPENEMR_P-2025-%'
ORDER BY pubpid;
```

**ì˜ˆìƒ ì¶œë ¥**:
```
+-----+---------------------+---------+----------+------------+------+
| id  | pubpid              | fname   | lname    | DOB        | sex  |
+-----+---------------------+---------+----------+------------+------+
| 456 | OPENEMR_P-2025-001  | MinJun  | Kim      | 1985-05-15 | Male |
| 457 | OPENEMR_P-2025-002  | SeoYun  | Lee      | 1990-08-22 | Female |
| 458 | OPENEMR_P-2025-003  | JiHoon  | Park     | 1978-03-10 | Male |
| 459 | OPENEMR_P-2025-004  | YeJin   | Choi     | 1995-11-30 | Female |
| 460 | OPENEMR_P-2025-005  | DoHyun  | Jung     | 1982-07-18 | Male |
+-----+---------------------+---------+----------+------------+------+
```

---

### 3. HAPI FHIR í™•ì¸

```powershell
# FHIR ì„œë²„ì—ì„œ Patient ì¡°íšŒ
curl http://localhost:8080/fhir/Patient?identifier=P-2025-001
```

**ì˜ˆìƒ ì‘ë‹µ** (JSON):
```json
{
  "resourceType": "Bundle",
  "type": "searchset",
  "total": 1,
  "entry": [
    {
      "resource": {
        "resourceType": "Patient",
        "id": "fhir-123",
        "identifier": [
          {
            "system": "http://neuronova.com/patient-id",
            "value": "P-2025-001"
          }
        ],
        "name": [
          {
            "family": "Kim",
            "given": ["MinJun"]
          }
        ],
        "gender": "male",
        "birthDate": "1985-05-15"
      }
    }
  ]
}
```

---

### 4. Orthanc PACS í™•ì¸

```powershell
# Orthanc í—¬ìŠ¤ì²´í¬
curl http://localhost:8042/system

# ì €ì¥ëœ Studies ìˆ˜ í™•ì¸
curl http://localhost:8042/statistics
```

**ì˜ˆìƒ ì‘ë‹µ**:
```json
{
  "TotalDiskSize": "2048MB",
  "TotalDiskSizeMB": 2048,
  "CountPatients": 2,
  "CountStudies": 2,
  "CountSeries": 20,
  "CountInstances": 1860
}
```

---

## ğŸ”§ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¬¸ì œ 1: OpenEMR ë™ê¸°í™” ì‹¤íŒ¨

**ì¦ìƒ**: Outbox ë ˆì½”ë“œê°€ `failed` ìƒíƒœ

**ì›ì¸**:
- OpenEMR ì»¨í…Œì´ë„ˆ ë¯¸ì‹¤í–‰
- OpenEMR FHIR API ì ‘ê·¼ ë¶ˆê°€
- ë„¤íŠ¸ì›Œí¬ íƒ€ì„ì•„ì›ƒ

**í•´ê²°**:
```powershell
# OpenEMR ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸
docker-compose -f docker-compose.dev.yml ps openemr

# OpenEMR ë¡œê·¸ í™•ì¸
docker-compose -f docker-compose.dev.yml logs openemr

# OpenEMR FHIR API ì ‘ê·¼ í…ŒìŠ¤íŠ¸
curl http://localhost:80/apis/default/fhir/Patient

# ìˆ˜ë™ ì¬ì‹œë„
docker-compose -f docker-compose.dev.yml exec django python manage.py retry_failed_outbox
```

---

### ë¬¸ì œ 2: FHIR ìë™ ë™ê¸°í™” ì‹¤íŒ¨

**ì¦ìƒ**: `fhir_id` í•„ë“œê°€ `None`

**ì›ì¸**:
- FHIR signals ë¹„í™œì„±í™”
- HAPI FHIR ì„œë²„ ë‹¤ìš´

**í•´ê²°**:
```powershell
# FHIR signals í™œì„±í™” í™•ì¸
docker-compose -f docker-compose.dev.yml exec django python manage.py shell

# Python shell
from fhir.apps import FhirConfig
print(FhirConfig.ready)  # Should print True

# HAPI FHIR ì„œë²„ í—¬ìŠ¤ì²´í¬
curl http://localhost:8080/fhir/metadata

# HAPI FHIR ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘
docker-compose -f docker-compose.dev.yml restart hapi-fhir
```

---

### ë¬¸ì œ 3: Celery Worker ë¯¸ì‹¤í–‰

**ì¦ìƒ**: Outbox ë ˆì½”ë“œê°€ ê³„ì† `pending` ìƒíƒœ

**ì›ì¸**: Celery Worker ì»¨í…Œì´ë„ˆ ë¯¸ì‹¤í–‰

**í•´ê²°**:
```powershell
# Celery Worker ìƒíƒœ í™•ì¸
docker-compose -f docker-compose.dev.yml ps celery-worker

# Celery Worker ë¡œê·¸ í™•ì¸
docker-compose -f docker-compose.dev.yml logs celery-worker

# Celery Worker ì¬ì‹œì‘
docker-compose -f docker-compose.dev.yml restart celery-worker

# Celery Beat í™•ì¸ (ì¬ì‹œë„ ìŠ¤ì¼€ì¤„ëŸ¬)
docker-compose -f docker-compose.dev.yml ps celery-beat
docker-compose -f docker-compose.dev.yml logs celery-beat
```

---

### ë¬¸ì œ 4: í™˜ì ID ì¤‘ë³µ

**ì¦ìƒ**: `IntegrityError: Duplicate entry for key 'PRIMARY'`

**ì›ì¸**: ê¸°ì¡´ ë°ì´í„° ì¡´ì¬

**í•´ê²°**:
```powershell
# --reset í”Œë˜ê·¸ë¡œ ê¸°ì¡´ ë°ì´í„° ì‚­ì œ í›„ ì¬ìƒì„±
docker-compose -f docker-compose.dev.yml exec django python manage.py seed_initial_data --reset

# ë˜ëŠ” ìˆ˜ë™ ì‚­ì œ
docker-compose -f docker-compose.dev.yml exec django python manage.py shell

# Python shell
from emr.models import PatientCache
PatientCache.objects.all().delete()
```

---

### ë¬¸ì œ 5: DICOM ì—…ë¡œë“œ ì‹¤íŒ¨

**ì¦ìƒ**: `Connection refused to Orthanc`

**í•´ê²°**:
```powershell
# Orthanc ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸
docker-compose -f docker-compose.dev.yml ps orthanc

# Orthanc í—¬ìŠ¤ì²´í¬
curl http://localhost:8042/system

# Orthanc ë¡œê·¸ í™•ì¸
docker-compose -f docker-compose.dev.yml logs orthanc

# Orthanc ì¬ì‹œì‘
docker-compose -f docker-compose.dev.yml restart orthanc
```

---

## ğŸ“Š ì™„ì „ ì´ˆê¸°í™” ì‹œë‚˜ë¦¬ì˜¤

Dockerë¥¼ ì™„ì „íˆ ì‚­ì œí•˜ê³  ì¬ì„¤ì¹˜í•œ ê²½ìš°:

```powershell
# 1. ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd d:\1222\NeuroNova_v1

# 2. ê¸°ì¡´ Docker ì™„ì „ ì •ë¦¬ (ì£¼ì˜!)
docker-compose -f docker-compose.dev.yml down -v

# 3. ì „ì²´ ìŠ¤íƒ ì‹œì‘
docker-compose -f docker-compose.dev.yml up -d

# 4. ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸ (ëª¨ë‘ healthy ëŒ€ê¸°)
docker-compose -f docker-compose.dev.yml ps

# 5. ì´ˆê¸°í™” ëŒ€ê¸° (Django ë§ˆì´ê·¸ë ˆì´ì…˜ ìë™ ì‹¤í–‰)
# ì•½ 30ì´ˆ ëŒ€ê¸°

# 6. í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì ìƒì„±
docker-compose -f docker-compose.dev.yml exec django python manage.py create_test_users

# 7. ìƒ˜í”Œ ë°ì´í„° ìƒì„±
docker-compose -f docker-compose.dev.yml exec django python manage.py seed_initial_data

# 8. ë™ê¸°í™” ìƒíƒœ í™•ì¸ (1-2ë¶„ ëŒ€ê¸°)
docker-compose -f docker-compose.dev.yml exec django python manage.py check_sync_status

# 9. DICOM ì—…ë¡œë“œ (ì„ íƒì‚¬í•­)
docker-compose -f docker-compose.dev.yml exec django python manage.py upload_sample_dicoms --dry-run

# ì™„ë£Œ!
```

**ì˜ˆìƒ ì‹œê°„**: 5-7ë¶„ (ì»¨í…Œì´ë„ˆ ì‹œì‘ + ë™ê¸°í™” í¬í•¨)

---

## ğŸ“š ê´€ë ¨ ë¬¸ì„œ

- [43_ë°ì´í„°_íë¦„_ì•„í‚¤í…ì²˜.md](43_ë°ì´í„°_íë¦„_ì•„í‚¤í…ì²˜.md) - ë°ì´í„° ì €ì¥ì†Œ êµ¬ì¡° ìƒì„¸
- [44_ë°ì´í„°_íë¦„_ê°€ì´ë“œ.md](44_ë°ì´í„°_íë¦„_ê°€ì´ë“œ.md) - ë°ì´í„° íë¦„ ì‹œë‚˜ë¦¬ì˜¤ ìƒì„¸
- [19_Write_Through_íŒ¨í„´_ê°€ì´ë“œ.md](19_Write_Through_íŒ¨í„´_ê°€ì´ë“œ.md) - Write-Through íŒ¨í„´ ì„¤ëª…
- [39_Docker_ì•„í‚¤í…ì²˜.md](39_Docker_ì•„í‚¤í…ì²˜.md) - Docker ì•„í‚¤í…ì²˜ ìƒì„¸
- [40_Docker_ê°œë°œ_ê°€ì´ë“œ.md](40_Docker_ê°œë°œ_ê°€ì´ë“œ.md) - Docker ê°œë°œ ì‹¤ìŠµ

---

## ğŸ“ íê¸°ëœ ë¬¸ì„œ

ë‹¤ìŒ ë¬¸ì„œëŠ” ë³¸ ê°€ì´ë“œë¡œ í†µí•©ë˜ì–´ **íê¸°**ë˜ì—ˆìŠµë‹ˆë‹¤:
- ~~`16_ë°ì´í„°_ì‹œë”©_ê°€ì´ë“œ.md`~~ (ë ˆê±°ì‹œ í™˜ê²½ìš©, 2025-12-23)
- ~~`38_ë°ì´í„°_ì´ˆê¸°í™”_ê°€ì´ë“œ.md`~~ (OpenEMR ëˆ„ë½, 2025-12-30)

**íê¸° ì‚¬ìœ **:
1. ë‘ ë¬¸ì„œ ê°„ í™˜ì ID í˜•ì‹ ë¶ˆì¼ì¹˜ (`P-2025-001` vs `P20250001`)
2. 38ë²ˆ ë¬¸ì„œì—ì„œ OpenEMR ë§¤í•‘ í•„ë“œ ëˆ„ë½
3. ë°ì´í„° ì•„í‚¤í…ì²˜ (43, 44ë²ˆ ë¬¸ì„œ)ë¥¼ ì¤€ìˆ˜í•˜ì§€ ì•ŠìŒ
4. Outbox íŒ¨í„´ ë¯¸ë°˜ì˜

---

**ë¬¸ì„œ ë²„ì „**: 1.0
**ìµœì¢… ìˆ˜ì •**: 2026-01-01
**ì‘ì„±ì**: NeuroNova Development Team
