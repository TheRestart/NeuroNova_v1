# Redis & Celery ì‹œê°í™” ë° ëª¨ë‹ˆí„°ë§ ë„êµ¬ ê°€ì´ë“œ

**ì‘ì„±ì¼**: 2025-12-29
**ëŒ€ìƒ**: ê°œë°œì, DevOps ì—”ì§€ë‹ˆì–´
**ëª©ì **: NeuroNova CDSSì˜ ì‹œê°í™” ë° ëª¨ë‹ˆí„°ë§ ë„êµ¬ ì™„ë²½ ê°€ì´ë“œ

---

## ğŸ“‹ ëª©ì°¨

1. [Flower (Celery ëª¨ë‹ˆí„°ë§)](#1-flower-celery-ëª¨ë‹ˆí„°ë§)
2. [Celery ì¢…ë¥˜ë³„ ìƒì„¸](#2-celery-ì¢…ë¥˜ë³„-ìƒì„¸)
3. [RedisInsight (Redis GUI)](#3-redisinsight-redis-gui)
4. [ê¸°íƒ€ ëª¨ë‹ˆí„°ë§ ë„êµ¬](#4-ê¸°íƒ€-ëª¨ë‹ˆí„°ë§-ë„êµ¬)
5. [í†µí•© ëŒ€ì‹œë³´ë“œ êµ¬ì„±](#5-í†µí•©-ëŒ€ì‹œë³´ë“œ-êµ¬ì„±)

---

## 1. Flower (Celery ëª¨ë‹ˆí„°ë§)

### 1.1 Flowerë€?

**Flower**ëŠ” Celery ì „ìš© ì‹¤ì‹œê°„ ì›¹ ê¸°ë°˜ ëª¨ë‹ˆí„°ë§ ë„êµ¬ì…ë‹ˆë‹¤.

**ì£¼ìš” ê¸°ëŠ¥:**
- âœ… **ì‹¤ì‹œê°„ ì‘ì—… ëª¨ë‹ˆí„°ë§**: ì§„í–‰ ì¤‘/ì™„ë£Œ/ì‹¤íŒ¨ ì‘ì—… ì¶”ì 
- âœ… **Worker ìƒíƒœ í™•ì¸**: CPU, ë©”ëª¨ë¦¬, ì²˜ë¦¬ ì‘ì—… ìˆ˜
- âœ… **ì‘ì—… ì¬ì‹œë„/ì·¨ì†Œ**: ì›¹ UIì—ì„œ ì‘ì—… ì œì–´
- âœ… **ê·¸ë˜í”„ ì‹œê°í™”**: ì‹œê°„ë³„ ì²˜ë¦¬ëŸ‰ ê·¸ë˜í”„
- âœ… **ì‘ì—… í†µê³„**: ì„±ê³µë¥ , ì‹¤íŒ¨ìœ¨, í‰ê·  ìˆ˜í–‰ ì‹œê°„
- âœ… **HTTP API ì œê³µ**: RESTful APIë¡œ ë©”íŠ¸ë¦­ ì¡°íšŒ

### 1.2 ì„¤ì¹˜ ë° ì‹¤í–‰

**ì„¤ì¹˜ (ì´ë¯¸ ì™„ë£Œ):**

```bash
pip install flower==2.0.1
```

**ì‹¤í–‰:**

```powershell
# Terminal 4 - Flower ì‹œì‘
cd d:\1222\NeuroNova_v1\NeuroNova_02_back_end\01_django_server
venv\Scripts\activate
celery -A cdss_backend flower --port=5555
```

**ì ‘ì†:**
- URL: http://localhost:5555
- ì¸ì¦: ê¸°ë³¸ì ìœ¼ë¡œ ì¸ì¦ ì—†ìŒ (í”„ë¡œë•ì…˜ì—ì„œëŠ” ì„¤ì • í•„ìš”)

### 1.3 Flower ëŒ€ì‹œë³´ë“œ êµ¬ì„±

#### ë©”ì¸ ëŒ€ì‹œë³´ë“œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Flower - Celery Monitoring                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ“Š Overview                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Workers     â”‚ Tasks       â”‚ Queued      â”‚ Active       â”‚â”‚
â”‚  â”‚ 1 online    â”‚ 523 total   â”‚ 12 pending  â”‚ 3 running    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚  ğŸ“ˆ Task Success Rate (Last 1 Hour)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 92%     â”‚â”‚
â”‚  â”‚  Succeeded: 480  â”‚  Failed: 38  â”‚  Retrying: 5         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚  â±ï¸ Average Task Runtime                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ai.tasks.process_ai_job           â”‚  23.4s            â”‚â”‚
â”‚  â”‚  fhir.tasks.sync_fhir_resource     â”‚  1.2s             â”‚â”‚
â”‚  â”‚  fhir.tasks.cleanup_old_sync_queue â”‚  0.8s             â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Workers íƒ­

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Workers                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ–¥ï¸ worker1@localhost                      [â—] Active       â”‚
â”‚  â”œâ”€ Hostname: DESKTOP-ABC123                                â”‚
â”‚  â”œâ”€ Software: celery 5.3.4 (emerald-rush)                   â”‚
â”‚  â”œâ”€ Pool: prefork (4 processes)                             â”‚
â”‚  â”œâ”€ Concurrency: 4                                          â”‚
â”‚  â”œâ”€ CPU Usage: 28.5%                                        â”‚
â”‚  â”œâ”€ Memory: 512MB / 2GB (25.6%)                             â”‚
â”‚  â”œâ”€ Uptime: 2d 5h 23m                                       â”‚
â”‚  â”œâ”€ Total Tasks: 1,234                                      â”‚
â”‚  â”‚   â”œâ”€ Active: 3                                           â”‚
â”‚  â”‚   â”œâ”€ Processed: 1,180                                    â”‚
â”‚  â”‚   â”œâ”€ Failed: 51                                          â”‚
â”‚  â”‚   â””â”€ Retrying: 3                                         â”‚
â”‚  â””â”€ Queues: celery, ai, fhir                                â”‚
â”‚                                                             â”‚
â”‚  [Shutdown Worker] [Restart Worker] [View Logs]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Tasks íƒ­

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tasks                                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Filter: [All] [Active] [Succeeded] [Failed] [Retrying]     â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ Task Name                  â”‚ State  â”‚ Runtime â”‚ Started â”‚â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚ â”‚ ai.tasks.process_ai_job    â”‚ ACTIVE â”‚ 15.2s   â”‚ 10:34   â”‚â”‚
â”‚ â”‚   Args: ('job_abc123',)                                 â”‚â”‚
â”‚ â”‚   [View Details] [Revoke]                               â”‚â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚ â”‚ fhir.tasks.sync_fhir_res.. â”‚ SUCCESSâ”‚ 1.1s    â”‚ 10:33   â”‚â”‚
â”‚ â”‚   Args: ('Patient', 'P001')                             â”‚â”‚
â”‚ â”‚   Result: {"status": "ok", "resource_id": "12345"}      â”‚â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚ â”‚ ai.tasks.process_ai_job    â”‚ FAILUREâ”‚ 2.3s    â”‚ 10:30   â”‚â”‚
â”‚ â”‚   Args: ('job_def456',)                                 â”‚â”‚
â”‚ â”‚   Exception: ConnectionError("AI server unreachable")   â”‚â”‚
â”‚ â”‚   [Retry] [View Traceback]                              â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚ Page: [1] [2] [3] ... [10]  (100 per page)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Broker íƒ­ (Redis í ìƒíƒœ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Broker (Redis)                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ“¦ Queues                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Queue Name  â”‚ Messages â”‚ Active  â”‚ Reserved â”‚ Workers  â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ celery      â”‚ 5        â”‚ 2       â”‚ 0        â”‚ 1        â”‚â”‚
â”‚  â”‚ ai          â”‚ 8        â”‚ 1       â”‚ 0        â”‚ 1        â”‚â”‚
â”‚  â”‚ fhir        â”‚ 3        â”‚ 0       â”‚ 0        â”‚ 1        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚  ğŸ”— Broker Info                                             â”‚
â”‚  â”œâ”€ URL: redis://localhost:6379/0                           â”‚
â”‚  â”œâ”€ Status: Connected                                       â”‚
â”‚  â”œâ”€ Ping: 1ms                                               â”‚
â”‚  â””â”€ Version: 7.0.15                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Graph íƒ­ (ì‹œê°í™”)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Graphs                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ“Š Task Throughput (Last 6 Hours)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                    â–²                    â”‚â”‚
â”‚  â”‚ Tasks/min                          â”‚                    â”‚â”‚
â”‚  â”‚  50 â”¤                              â”‚     â—              â”‚â”‚
â”‚  â”‚  40 â”¤                          â—â”€â”€â”€â”˜                    â”‚â”‚
â”‚  â”‚  30 â”¤                      â—â”€â”€â”€                         â”‚â”‚
â”‚  â”‚  20 â”¤                  â—â”€â”€â”€                             â”‚â”‚
â”‚  â”‚  10 â”¤              â—â”€â”€â”€                                 â”‚â”‚
â”‚  â”‚   0 â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â†’     â”‚â”‚
â”‚  â”‚      08:00  10:00  12:00  14:00  16:00  18:00  Time    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚  ğŸ“ˆ Success/Failure Ratio                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 92% Success       â”‚â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆ 8% Failure                                        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.4 Flower ê³ ê¸‰ ì„¤ì •

#### ì¸ì¦ ì„¤ì • (í”„ë¡œë•ì…˜)

```python
# cdss_backend/celery.py
app.conf.update(
    # Flower ì¸ì¦
    broker_api='redis://localhost:6379/0',
    flower_basic_auth=['admin:password123'],  # Basic Auth
)
```

```bash
# Flower ì‹¤í–‰ (ì¸ì¦ í™œì„±í™”)
celery -A cdss_backend flower \
  --port=5555 \
  --basic_auth=admin:password123
```

#### Persistent Mode (ì‘ì—… ê¸°ë¡ ì €ì¥)

```bash
# Flower DB ì‚¬ìš© (SQLite)
celery -A cdss_backend flower \
  --port=5555 \
  --persistent=True \
  --db=/path/to/flower.db \
  --max_tasks=10000
```

#### SSL/HTTPS ì„¤ì •

```bash
# HTTPSë¡œ ì‹¤í–‰
celery -A cdss_backend flower \
  --port=5555 \
  --certfile=/path/to/cert.pem \
  --keyfile=/path/to/key.pem
```

### 1.5 Flower HTTP API

**API ì—”ë“œí¬ì¸íŠ¸:**

| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ì„¤ëª… |
|-----------|--------|------|
| `/api/workers` | GET | ëª¨ë“  ì›Œì»¤ ìƒíƒœ ì¡°íšŒ |
| `/api/tasks` | GET | ì‘ì—… ëª©ë¡ ì¡°íšŒ |
| `/api/task/info/{task_id}` | GET | íŠ¹ì • ì‘ì—… ìƒì„¸ ì •ë³´ |
| `/api/task/revoke/{task_id}` | POST | ì‘ì—… ì·¨ì†Œ |
| `/api/worker/shutdown/{hostname}` | POST | ì›Œì»¤ ì¢…ë£Œ |

**ì˜ˆì‹œ:**

```bash
# ëª¨ë“  ì›Œì»¤ ì¡°íšŒ
curl http://localhost:5555/api/workers

# íŠ¹ì • ì‘ì—… ìƒì„¸ ì •ë³´
curl http://localhost:5555/api/task/info/abc-123-def-456

# ì‘ì—… ì·¨ì†Œ
curl -X POST http://localhost:5555/api/task/revoke/abc-123-def-456?terminate=true
```

**Pythonì—ì„œ ì‚¬ìš©:**

```python
import requests

# Flower API í´ë¼ì´ì–¸íŠ¸
class FlowerClient:
    def __init__(self, base_url='http://localhost:5555'):
        self.base_url = base_url

    def get_workers(self):
        """ëª¨ë“  ì›Œì»¤ ìƒíƒœ ì¡°íšŒ"""
        response = requests.get(f'{self.base_url}/api/workers')
        return response.json()

    def get_active_tasks(self):
        """ì§„í–‰ ì¤‘ì¸ ì‘ì—… ì¡°íšŒ"""
        response = requests.get(f'{self.base_url}/api/tasks?state=ACTIVE')
        return response.json()

    def revoke_task(self, task_id, terminate=False):
        """ì‘ì—… ì·¨ì†Œ"""
        response = requests.post(
            f'{self.base_url}/api/task/revoke/{task_id}',
            params={'terminate': terminate}
        )
        return response.json()

# ì‚¬ìš© ì˜ˆì‹œ
client = FlowerClient()
workers = client.get_workers()
print(f"Active workers: {len(workers)}")
```

---

## 2. Celery ì¢…ë¥˜ë³„ ìƒì„¸

### 2.1 Celery Worker (ì‘ì—…ì)

**ì—­í• **: ì‹¤ì œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” í”„ë¡œì„¸ìŠ¤

#### Worker ì‹¤í–‰ ëª¨ë“œ

**1. Prefork (ê¸°ë³¸, ë©€í‹°í”„ë¡œì„¸ìŠ¤)**

```bash
celery -A cdss_backend worker -l info --concurrency=4 --pool=prefork
```

**íŠ¹ì§•:**
- âœ… CPU ì§‘ì•½ì  ì‘ì—…ì— ìµœì  (AI ë¶„ì„, ì´ë¯¸ì§€ ì²˜ë¦¬)
- âœ… ì§„ì •í•œ ë³‘ë ¬ ì²˜ë¦¬ (GIL íšŒí”¼)
- âœ… í”„ë¡œì„¸ìŠ¤ ê²©ë¦¬ (í•œ ì‘ì—… ì‹¤íŒ¨ê°€ ë‹¤ë¥¸ ì‘ì—…ì— ì˜í–¥ ì—†ìŒ)
- âŒ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ë†’ìŒ (í”„ë¡œì„¸ìŠ¤ë‹¹ ë…ë¦½ ë©”ëª¨ë¦¬)
- âŒ í”„ë¡œì„¸ìŠ¤ ìƒì„±/ì¢…ë£Œ ì˜¤ë²„í—¤ë“œ

**ì‚¬ìš© ì‚¬ë¡€:**
- AI ëª¨ë¸ ì¶”ë¡  (`ai.tasks.process_ai_job`)
- ì´ë¯¸ì§€ ë³€í™˜ ì‘ì—…
- ë°ì´í„° ë¶„ì„

**2. Threading (ë©€í‹°ìŠ¤ë ˆë“œ)**

```bash
celery -A cdss_backend worker -l info --concurrency=10 --pool=threads
```

**íŠ¹ì§•:**
- âœ… I/O ì§‘ì•½ì  ì‘ì—…ì— ì í•© (API í˜¸ì¶œ, DB ì¿¼ë¦¬)
- âœ… ë©”ëª¨ë¦¬ íš¨ìœ¨ì  (ìŠ¤ë ˆë“œ ê°„ ë©”ëª¨ë¦¬ ê³µìœ )
- âŒ GIL ì œì•½ (Python ê¸€ë¡œë²Œ ì¸í„°í”„ë¦¬í„° ë½)
- âŒ CPU ë°”ìš´ë“œ ì‘ì—…ì—ëŠ” ë¹„íš¨ìœ¨ì 

**ì‚¬ìš© ì‚¬ë¡€:**
- FHIR API í˜¸ì¶œ (`fhir.tasks.sync_fhir_resource`)
- ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ë™
- DB ì¿¼ë¦¬

**3. Eventlet (ë¹„ë™ê¸° I/O)**

```bash
# ì„¤ì¹˜ í•„ìš”
pip install eventlet

celery -A cdss_backend worker -l info --concurrency=1000 --pool=eventlet
```

**íŠ¹ì§•:**
- âœ… ë§¤ìš° ë†’ì€ ë™ì‹œì„± (ìˆ˜ì²œ ê°œ ì‘ì—…)
- âœ… I/O ëŒ€ê¸° ì‹œê°„ í™œìš© (ë„¤íŠ¸ì›Œí¬ í˜¸ì¶œ)
- âœ… ë©”ëª¨ë¦¬ íš¨ìœ¨ì 
- âŒ CPU ì§‘ì•½ì  ì‘ì—… ë¶ˆê°€
- âŒ Blocking ë¼ì´ë¸ŒëŸ¬ë¦¬ í˜¸í™˜ ë¬¸ì œ

**ì‚¬ìš© ì‚¬ë¡€:**
- ëŒ€ëŸ‰ API í˜¸ì¶œ (ìˆ˜ì²œ ê°œ FHIR ë¦¬ì†ŒìŠ¤ ë™ê¸°í™”)
- WebSocket ì—°ê²°
- ì‹¤ì‹œê°„ ì•Œë¦¼ ì „ì†¡

**4. Gevent (ë¹„ë™ê¸° I/O, Eventlet ëŒ€ì²´)**

```bash
# ì„¤ì¹˜ í•„ìš”
pip install gevent

celery -A cdss_backend worker -l info --concurrency=1000 --pool=gevent
```

**íŠ¹ì§•:**
- Eventletê³¼ ìœ ì‚¬í•˜ì§€ë§Œ ë” ì•ˆì •ì 
- Monkey patchingìœ¼ë¡œ ë™ê¸° ì½”ë“œë¥¼ ë¹„ë™ê¸°ë¡œ ë³€í™˜

#### Worker ì „ìš© í ì„¤ì •

```bash
# AI ì „ìš© Worker (Prefork)
celery -A cdss_backend worker -Q ai -n ai_worker@%h \
  -l info --concurrency=4 --pool=prefork

# FHIR ì „ìš© Worker (Threading)
celery -A cdss_backend worker -Q fhir -n fhir_worker@%h \
  -l info --concurrency=10 --pool=threads

# ì •ë¦¬ ì‘ì—… ì „ìš© Worker (Eventlet)
celery -A cdss_backend worker -Q cleanup -n cleanup_worker@%h \
  -l info --concurrency=100 --pool=eventlet
```

#### Worker ì˜µì…˜ ìƒì„¸

| ì˜µì…˜ | ì„¤ëª… | ì˜ˆì‹œ |
|-----|------|------|
| `-A` | Celery ì•± ì´ë¦„ | `-A cdss_backend` |
| `-Q` | ì²˜ë¦¬í•  í (ì½¤ë§ˆ êµ¬ë¶„) | `-Q ai,fhir` |
| `-n` | Worker ì´ë¦„ | `-n worker1@%h` |
| `-l` | ë¡œê·¸ ë ˆë²¨ | `-l info` (debug/info/warning/error) |
| `--concurrency` | ë™ì‹œ ì²˜ë¦¬ ìˆ˜ | `--concurrency=4` |
| `--pool` | ì‹¤í–‰ ëª¨ë“œ | `--pool=prefork` |
| `--max-tasks-per-child` | Worker ì¬ì‹œì‘ ì „ ìµœëŒ€ ì‘ì—… ìˆ˜ | `--max-tasks-per-child=1000` |
| `--time-limit` | ì‘ì—… ìµœëŒ€ ì‹¤í–‰ ì‹œê°„ (ì´ˆ) | `--time-limit=300` |
| `--soft-time-limit` | Soft íƒ€ì„ì•„ì›ƒ (ì´ˆ) | `--soft-time-limit=270` |

### 2.2 Celery Beat (ìŠ¤ì¼€ì¤„ëŸ¬)

**ì—­í• **: ì£¼ê¸°ì  ì‘ì—…ì„ ìŠ¤ì¼€ì¤„ë§í•˜ì—¬ íì— ì¶”ê°€

#### Beat ì‹¤í–‰

```bash
celery -A cdss_backend beat -l info \
  --scheduler django_celery_beat.schedulers:DatabaseScheduler
```

#### Scheduler ì¢…ë¥˜

**1. DatabaseScheduler (django-celery-beat)**

```python
# cdss_backend/celery.py
app.conf.beat_scheduler = 'django_celery_beat.schedulers:DatabaseScheduler'
```

**íŠ¹ì§•:**
- âœ… Django Adminì—ì„œ ìŠ¤ì¼€ì¤„ ê´€ë¦¬
- âœ… ì„œë²„ ì¬ì‹œì‘ ì—†ì´ ìŠ¤ì¼€ì¤„ ë³€ê²½
- âœ… ë¶„ì‚° í™˜ê²½ ì§€ì› (DB ë½)
- âŒ DB ì¿¼ë¦¬ ì˜¤ë²„í—¤ë“œ

**ì‚¬ìš©:**
- Django Admin â†’ django_celery_beat â†’ Periodic tasks

**2. ê¸°ë³¸ Scheduler (ë©”ëª¨ë¦¬)**

```python
# cdss_backend/celery.py
app.conf.beat_schedule = {
    'process-pending-ai-jobs': {
        'task': 'ai.tasks.process_pending_ai_jobs',
        'schedule': 180.0,  # 3ë¶„
    },
}
```

**íŠ¹ì§•:**
- âœ… ë¹ ë¥¸ ì„±ëŠ¥ (ë©”ëª¨ë¦¬)
- âŒ ì½”ë“œë¡œë§Œ ìŠ¤ì¼€ì¤„ ê´€ë¦¬
- âŒ ë³€ê²½ ì‹œ ì„œë²„ ì¬ì‹œì‘ í•„ìš”

#### ìŠ¤ì¼€ì¤„ í‘œí˜„ì‹

**1. Interval (ê°„ê²©)**

```python
from celery.schedules import schedule

app.conf.beat_schedule = {
    'every-3-minutes': {
        'task': 'ai.tasks.process_pending_ai_jobs',
        'schedule': 180.0,  # ì´ˆ ë‹¨ìœ„
    },
}
```

**2. Crontab (í¬ë¡  í‘œí˜„ì‹)**

```python
from celery.schedules import crontab

app.conf.beat_schedule = {
    'cleanup-daily': {
        'task': 'fhir.tasks.cleanup_old_sync_queue',
        'schedule': crontab(hour=2, minute=0),  # ë§¤ì¼ ìƒˆë²½ 2ì‹œ
    },
    'sync-every-monday': {
        'task': 'fhir.tasks.weekly_sync',
        'schedule': crontab(hour=9, minute=0, day_of_week=1),  # ì›”ìš”ì¼ 9ì‹œ
    },
}
```

**Crontab ì˜ˆì‹œ:**

```python
# ë§¤ ì‹œê°„ 0ë¶„
crontab(minute=0)

# ë§¤ì¼ ì˜¤ì „ 9ì‹œ
crontab(hour=9, minute=0)

# ì›”ìš”ì¼ ì˜¤ì „ 9ì‹œ
crontab(hour=9, minute=0, day_of_week=1)

# ë§¤ì›” 1ì¼ ìì •
crontab(hour=0, minute=0, day_of_month=1)

# ë§¤ì£¼ ì›”/ìˆ˜/ê¸ˆ ì˜¤í›„ 3ì‹œ
crontab(hour=15, minute=0, day_of_week='1,3,5')
```

**3. Solar (ì¼ì¶œ/ì¼ëª° ê¸°ë°˜)**

```python
from celery.schedules import solar

app.conf.beat_schedule = {
    'morning-report': {
        'task': 'reports.tasks.morning_report',
        'schedule': solar('sunrise', -37.81753, 144.96715),  # ë©œë²„ë¥¸ ì¼ì¶œ
    },
}
```

#### Beat ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€

**ë¬¸ì œ**: ì—¬ëŸ¬ Beat ì¸ìŠ¤í„´ìŠ¤ ì‹¤í–‰ ì‹œ ì‘ì—… ì¤‘ë³µ ìŠ¤ì¼€ì¤„ë§

**í•´ê²° (DatabaseScheduler ì‚¬ìš©):**
- DatabaseSchedulerëŠ” DB ë½ìœ¼ë¡œ ì¤‘ë³µ ë°©ì§€
- í•˜ë‚˜ì˜ Beatë§Œ í™œì„±í™”ë¨

**í™•ì¸:**

```bash
# Beat ìƒíƒœ í™•ì¸
celery -A cdss_backend inspect scheduled

# Beat ë¡œê·¸ í™•ì¸
# [INFO/Beat] Scheduler: Sending due task process-pending-ai-jobs
```

### 2.3 Celery Flower (ëª¨ë‹ˆí„°ë§)

ì•ì„œ ì„¹ì…˜ 1ì—ì„œ ìƒì„¸íˆ ë‹¤ë£¸.

### 2.4 Celery Events (ì´ë²¤íŠ¸ ìˆ˜ì§‘ê¸°)

**ì—­í• **: Celery ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì§‘í•˜ì—¬ Flowerë‚˜ ë‹¤ë¥¸ ëª¨ë‹ˆí„°ë§ ë„êµ¬ì— ì œê³µ

#### Events ì‹¤í–‰

```bash
celery -A cdss_backend events -l info
```

**íŠ¹ì§•:**
- Worker, Task ì´ë²¤íŠ¸ ìˆ˜ì§‘
- Flowerê°€ ì‹¤ì‹œê°„ ë°ì´í„°ë¥¼ í‘œì‹œí•˜ë ¤ë©´ í•„ìš”
- í˜„ì¬ëŠ” Flowerê°€ ìë™ìœ¼ë¡œ ì´ë²¤íŠ¸ ìˆ˜ì‹ 

#### ì´ë²¤íŠ¸ ì¢…ë¥˜

```python
# celery.signals
from celery.signals import (
    task_prerun,     # ì‘ì—… ì‹œì‘ ì „
    task_postrun,    # ì‘ì—… ì™„ë£Œ í›„
    task_success,    # ì‘ì—… ì„±ê³µ
    task_failure,    # ì‘ì—… ì‹¤íŒ¨
    task_retry,      # ì‘ì—… ì¬ì‹œë„
    worker_ready,    # Worker ì¤€ë¹„ ì™„ë£Œ
    worker_shutdown, # Worker ì¢…ë£Œ
)

@task_success.connect
def task_success_handler(sender=None, result=None, **kwargs):
    print(f"Task {sender.name} succeeded: {result}")
```

### 2.5 Celery Inspect (ìƒíƒœ ì¡°íšŒ)

**ì—­í• **: Worker ìƒíƒœ, ì‘ì—… í, ìŠ¤ì¼€ì¤„ ì¡°íšŒ

#### ëª…ë ¹ì–´

```bash
# í™œì„± ì‘ì—… ì¡°íšŒ
celery -A cdss_backend inspect active

# ì˜ˆì•½ëœ ì‘ì—… (ETA/countdown)
celery -A cdss_backend inspect scheduled

# ë“±ë¡ëœ íƒœìŠ¤í¬ ëª©ë¡
celery -A cdss_backend inspect registered

# Worker í†µê³„
celery -A cdss_backend inspect stats

# í™œì„± í
celery -A cdss_backend inspect active_queues

# Workerì—ê²Œ Ping
celery -A cdss_backend inspect ping
```

**ì¶œë ¥ ì˜ˆì‹œ:**

```json
// celery -A cdss_backend inspect active
{
  "worker1@localhost": [
    {
      "id": "abc-123-def-456",
      "name": "ai.tasks.process_ai_job",
      "args": ["job_abc123"],
      "kwargs": {},
      "time_start": 1703865600.0,
      "acknowledged": true,
      "delivery_info": {
        "exchange": "",
        "routing_key": "celery",
        "priority": 0
      },
      "worker_pid": 12345
    }
  ]
}
```

### 2.6 Celery Control (Worker ì œì–´)

**ì—­í• **: Workerë¥¼ ì›ê²©ìœ¼ë¡œ ì œì–´

#### ëª…ë ¹ì–´

```bash
# Worker ì¢…ë£Œ
celery -A cdss_backend control shutdown

# Worker ì¬ì‹œì‘ (ì‘ì—… ì™„ë£Œ í›„)
celery -A cdss_backend control pool_restart

# ëª¨ë“  ì‘ì—… ì·¨ì†Œ
celery -A cdss_backend purge

# íŠ¹ì • í ë¹„ìš°ê¸°
celery -A cdss_backend purge -Q ai

# Workerì— ìƒˆ íƒœìŠ¤í¬ ì¶”ê°€ (rate limit ë³€ê²½)
celery -A cdss_backend control rate_limit ai.tasks.process_ai_job 10/m
```

---

## 3. RedisInsight (Redis GUI)

### 3.1 RedisInsightë€?

**RedisInsight**ëŠ” Redis Labsì—ì„œ ì œê³µí•˜ëŠ” ê³µì‹ GUI ë„êµ¬ì…ë‹ˆë‹¤.

**ì£¼ìš” ê¸°ëŠ¥:**
- âœ… **í‚¤ ë¸Œë¼ìš°ì €**: ëª¨ë“  Redis í‚¤ ì‹œê°í™”
- âœ… **ë°ì´í„° í¸ì§‘**: í‚¤/ê°’ ì§ì ‘ í¸ì§‘
- âœ… **CLI ë‚´ì¥**: Redis CLI ê¸°ëŠ¥
- âœ… **ë©”ëª¨ë¦¬ ë¶„ì„**: ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ë¶„ì„
- âœ… **ìŠ¬ë¡œìš° ë¡œê·¸**: ëŠë¦° ì¿¼ë¦¬ ì¶”ì 
- âœ… **í´ëŸ¬ìŠ¤í„° ì§€ì›**: Redis Cluster ê´€ë¦¬

### 3.2 ì„¤ì¹˜

**Windows:**

```powershell
# Chocolatey
choco install redisinsight

# ë˜ëŠ” ë‹¤ìš´ë¡œë“œ
# https://redis.com/redis-enterprise/redis-insight/
```

**Docker:**

```bash
docker run -d \
  --name redisinsight \
  -p 8001:8001 \
  -v redisinsight:/db \
  redislabs/redisinsight:latest
```

### 3.3 ì—°ê²° ì„¤ì •

```
1. RedisInsight ì‹¤í–‰ (http://localhost:8001)
2. "Add Redis Database" í´ë¦­
3. ì—°ê²° ì •ë³´ ì…ë ¥:
   - Host: localhost
   - Port: 6379
   - Name: NeuroNova CDSS Redis
4. "Add Redis Database" í´ë¦­
```

### 3.4 RedisInsight ëŒ€ì‹œë³´ë“œ

#### Browser íƒ­ (í‚¤ ë¸Œë¼ìš°ì €)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RedisInsight - Browser                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ ğŸ” Search: [orthanc_url:*        ] [Search]                 â”‚
â”‚                                                             â”‚
â”‚ ğŸ“ Keys (1,523 total)                                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ âœ“ orthanc_url:study:1.2.840.113619.2.1.1.1             â”‚â”‚
â”‚ â”‚   Type: hash  â”‚  TTL: 2850s  â”‚  Memory: 512 bytes      â”‚â”‚
â”‚ â”‚                                                         â”‚â”‚
â”‚ â”‚ âœ“ orthanc_url:study:1.2.840.113619.2.1.1.2             â”‚â”‚
â”‚ â”‚   Type: hash  â”‚  TTL: 2640s  â”‚  Memory: 498 bytes      â”‚â”‚
â”‚ â”‚                                                         â”‚â”‚
â”‚ â”‚ âœ“ fhir_oauth:token                                      â”‚â”‚
â”‚ â”‚   Type: stringâ”‚  TTL: 77400s â”‚  Memory: 256 bytes      â”‚â”‚
â”‚ â”‚                                                         â”‚â”‚
â”‚ â”‚ âœ“ celery                                                â”‚â”‚
â”‚ â”‚   Type: list  â”‚  TTL: -1     â”‚  Memory: 1024 bytes     â”‚â”‚
â”‚ â”‚                                                         â”‚â”‚
â”‚ â”‚ âœ“ celery-task-meta-abc-123-def-456                     â”‚â”‚
â”‚ â”‚   Type: stringâ”‚  TTL: 3600s  â”‚  Memory: 1536 bytes     â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚ ğŸ“„ Key Details: orthanc_url:study:1.2.840.113619.2.1.1.1   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ Field                   â”‚ Value                         â”‚â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚ â”‚ url                     â”‚ http://orthanc:8042/dicom-... â”‚â”‚
â”‚ â”‚ token                   â”‚ eyJhbGciOiJIUzI1NiIsInR5cCI... â”‚â”‚
â”‚ â”‚ expires_at              â”‚ 2025-12-29T13:00:00Z          â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚ [Edit] [Delete] [Refresh] [Copy]                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Workbench íƒ­ (CLI)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RedisInsight - Workbench                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ > KEYS orthanc_url:*                                        â”‚
â”‚ 1) "orthanc_url:study:1.2.840.113619.2.1.1.1"              â”‚
â”‚ 2) "orthanc_url:study:1.2.840.113619.2.1.1.2"              â”‚
â”‚                                                             â”‚
â”‚ > HGETALL orthanc_url:study:1.2.840.113619.2.1.1.1         â”‚
â”‚ 1) "url"                                                    â”‚
â”‚ 2) "http://orthanc:8042/dicom-web/studies/1.2.840..."      â”‚
â”‚ 3) "token"                                                  â”‚
â”‚ 4) "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."                â”‚
â”‚ 5) "expires_at"                                             â”‚
â”‚ 6) "2025-12-29T13:00:00Z"                                   â”‚
â”‚                                                             â”‚
â”‚ > TTL orthanc_url:study:1.2.840.113619.2.1.1.1             â”‚
â”‚ (integer) 2850                                              â”‚
â”‚                                                             â”‚
â”‚ > LLEN celery                                               â”‚
â”‚ (integer) 5                                                 â”‚
â”‚                                                             â”‚
â”‚ [Run] [Clear] [History]                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Analysis íƒ­ (ë©”ëª¨ë¦¬ ë¶„ì„)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RedisInsight - Memory Analysis                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ ğŸ“Š Memory Usage by Key Pattern                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ Pattern              â”‚ Keys   â”‚ Memory    â”‚ %          â”‚â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚ â”‚ celery-task-meta-*   â”‚ 1,234  â”‚ 52.3 MB   â”‚ 40.8%      â”‚â”‚
â”‚ â”‚ orthanc_url:*        â”‚ 156    â”‚ 23.1 MB   â”‚ 18.0%      â”‚â”‚
â”‚ â”‚ celery               â”‚ 1      â”‚ 15.2 MB   â”‚ 11.9%      â”‚â”‚
â”‚ â”‚ fhir_*               â”‚ 89     â”‚ 12.5 MB   â”‚ 9.8%       â”‚â”‚
â”‚ â”‚ _kombu.*             â”‚ 45     â”‚ 8.9 MB    â”‚ 6.9%       â”‚â”‚
â”‚ â”‚ Other                â”‚ 32     â”‚ 16.0 MB   â”‚ 12.5%      â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚ ğŸ—‘ï¸ Recommendations                                          â”‚
â”‚ â”œâ”€ Set TTL on celery-task-meta-* keys (currently permanent)â”‚
â”‚ â”œâ”€ Consider increasing maxmemory (80% usage)                â”‚
â”‚ â””â”€ Review orthanc_url:* TTL (50min may be too long)        â”‚
â”‚                                                             â”‚
â”‚ [Export Report] [Cleanup] [Refresh]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.5 RedisInsight CLI ëª…ë ¹ì–´

**ìì£¼ ì‚¬ìš©í•˜ëŠ” ëª…ë ¹ì–´:**

```bash
# í‚¤ íŒ¨í„´ ê²€ìƒ‰
KEYS orthanc_url:*
SCAN 0 MATCH celery-task-* COUNT 100

# í‚¤ íƒ€ì… í™•ì¸
TYPE orthanc_url:study:123

# Hash ì¡°íšŒ
HGETALL orthanc_url:study:123
HGET orthanc_url:study:123 token

# List ì¡°íšŒ
LLEN celery
LRANGE celery 0 -1

# TTL í™•ì¸/ì„¤ì •
TTL orthanc_url:study:123
EXPIRE orthanc_url:study:123 3000

# í‚¤ ì‚­ì œ
DEL orthanc_url:study:123
FLUSHDB  # ì „ì²´ DB ì‚­ì œ (ì£¼ì˜!)

# ë©”ëª¨ë¦¬ ì •ë³´
INFO memory
MEMORY USAGE orthanc_url:study:123

# ìŠ¬ë¡œìš° ë¡œê·¸
SLOWLOG GET 10
```

---

## 4. ê¸°íƒ€ ëª¨ë‹ˆí„°ë§ ë„êµ¬

### 4.1 Redis Commander (ê²½ëŸ‰ GUI)

**ì„¤ì¹˜ ë° ì‹¤í–‰:**

```bash
# npm ì„¤ì¹˜
npm install -g redis-commander

# ì‹¤í–‰
redis-commander --port 8082
```

**ì ‘ì†**: http://localhost:8082

**íŠ¹ì§•:**
- ê²½ëŸ‰, ë¹ ë¥¸ ì‹œì‘
- ì›¹ ê¸°ë°˜
- í‚¤ í¸ì§‘, ì‚­ì œ ê¸°ëŠ¥

### 4.2 Celery Prometheus Exporter

**Prometheus ë©”íŠ¸ë¦­ ìˆ˜ì§‘:**

```bash
# ì„¤ì¹˜
pip install celery-exporter

# ì‹¤í–‰
celery-exporter --broker redis://localhost:6379/0
```

**ë©”íŠ¸ë¦­ ì˜ˆì‹œ:**

```
# Prometheus ë©”íŠ¸ë¦­
celery_tasks_total{state="success"} 1234
celery_tasks_total{state="failure"} 56
celery_worker_up{worker="worker1@localhost"} 1
celery_task_runtime_seconds_sum{task="ai.tasks.process_ai_job"} 12345.6
```

**Grafana ëŒ€ì‹œë³´ë“œ:**
- Celery ê³µì‹ Grafana ëŒ€ì‹œë³´ë“œ: https://grafana.com/grafana/dashboards/5788

### 4.3 Sentry (ì—ëŸ¬ ì¶”ì )

**Celery ì—ëŸ¬ë¥¼ Sentryë¡œ ì „ì†¡:**

```python
# settings.py
import sentry_sdk
from sentry_sdk.integrations.celery import CeleryIntegration

sentry_sdk.init(
    dsn="https://your-sentry-dsn",
    integrations=[CeleryIntegration()],
)
```

**ì—ëŸ¬ ë°œìƒ ì‹œ Sentryì— ìë™ ì „ì†¡:**
- ì—ëŸ¬ íƒ€ì…, ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤
- Worker ì •ë³´, ì‘ì—… ì¸ì
- ì‹¤ì‹œê°„ ì•Œë¦¼ (ì´ë©”ì¼, Slack)

### 4.4 Django Debug Toolbar

**Celery ì‘ì—… ë””ë²„ê¹…:**

```python
# settings.py (ê°œë°œ í™˜ê²½ë§Œ)
if DEBUG:
    INSTALLED_APPS += ['debug_toolbar']
    MIDDLEWARE += ['debug_toolbar.middleware.DebugToolbarMiddleware']
```

**ê¸°ëŠ¥:**
- SQL ì¿¼ë¦¬ ì¶”ì 
- ìºì‹œ íˆíŠ¸/ë¯¸ìŠ¤ í™•ì¸
- í…œí”Œë¦¿ ë Œë”ë§ ì‹œê°„

---

## 5. í†µí•© ëŒ€ì‹œë³´ë“œ êµ¬ì„±

### 5.1 ì „ì²´ ëª¨ë‹ˆí„°ë§ ìŠ¤íƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    NeuroNova ëª¨ë‹ˆí„°ë§ ìŠ¤íƒ                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  ğŸŒ¸ Flower (Celery)        http://localhost:5555          â”‚
â”‚  â”œâ”€ Worker ìƒíƒœ                                             â”‚
â”‚  â”œâ”€ ì‘ì—… ëª©ë¡ (Active/Success/Failed)                       â”‚
â”‚  â”œâ”€ í ìƒíƒœ                                                 â”‚
â”‚  â””â”€ ê·¸ë˜í”„ (ì²˜ë¦¬ëŸ‰, ì„±ê³µë¥ )                                  â”‚
â”‚                                                            â”‚
â”‚  ğŸ” RedisInsight (Redis)   http://localhost:8001          â”‚
â”‚  â”œâ”€ í‚¤ ë¸Œë¼ìš°ì €                                             â”‚
â”‚  â”œâ”€ ë©”ëª¨ë¦¬ ë¶„ì„                                             â”‚
â”‚  â”œâ”€ CLI Workbench                                          â”‚
â”‚  â””â”€ ìŠ¬ë¡œìš° ë¡œê·¸                                             â”‚
â”‚                                                            â”‚
â”‚  ğŸ“Š Django Admin           http://localhost:8000/admin    â”‚
â”‚  â”œâ”€ Periodic Tasks (django-celery-beat)                   â”‚
â”‚  â”œâ”€ ì‘ì—… ìŠ¤ì¼€ì¤„ ê´€ë¦¬                                         â”‚
â”‚  â””â”€ Interval/Crontab ì„¤ì •                                  â”‚
â”‚                                                            â”‚
â”‚  ğŸ”¥ Sentry (ì—ëŸ¬ ì¶”ì )     https://sentry.io              â”‚
â”‚  â”œâ”€ ì‹¤ì‹œê°„ ì—ëŸ¬ ì•Œë¦¼                                         â”‚
â”‚  â”œâ”€ ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤                                           â”‚
â”‚  â””â”€ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ (APM)                                     â”‚
â”‚                                                            â”‚
â”‚  ğŸ“ˆ Grafana + Prometheus   http://localhost:3000          â”‚
â”‚  â”œâ”€ Celery ë©”íŠ¸ë¦­ (celery-exporter)                        â”‚
â”‚  â”œâ”€ Redis ë©”íŠ¸ë¦­ (redis-exporter)                          â”‚
â”‚  â””â”€ ì‹œìŠ¤í…œ ë©”íŠ¸ë¦­ (node-exporter)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 Grafana ëŒ€ì‹œë³´ë“œ ì˜ˆì‹œ

**Celery ëŒ€ì‹œë³´ë“œ:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Grafana - Celery Monitoring                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ ğŸ“Š Task Processing Rate (Last 1 Hour)                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚  60 tasks/min â”¤         â•­â”€â”€â•®                 â•­â”€â”€â•®       â”‚â”‚
â”‚ â”‚  40 tasks/min â”¤     â•­â”€â”€â”€â•¯  â•°â”€â•®           â•­â”€â”€â”€â•¯  â•°â”€â•®     â”‚â”‚
â”‚ â”‚  20 tasks/min â”¤ â•­â”€â”€â”€â•¯         â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯       â•°â”€â”€â”€â•® â”‚â”‚
â”‚ â”‚   0 tasks/min â””â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”˜â”‚â”‚
â”‚ â”‚                 10:00  11:00  12:00  13:00  14:00       â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚ ğŸ¯ Success Rate                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚  100% â”¤  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 94%   â”‚â”‚
â”‚ â”‚   50% â”¤                                                 â”‚â”‚
â”‚ â”‚    0% â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚ â±ï¸ Average Task Duration                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚  ai.tasks.process_ai_job           23.4s                â”‚â”‚
â”‚ â”‚  fhir.tasks.sync_fhir_resource      1.2s                â”‚â”‚
â”‚ â”‚  fhir.tasks.cleanup_old_sync_queue  0.8s                â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Redis ëŒ€ì‹œë³´ë“œ:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Grafana - Redis Monitoring                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ ğŸ’¾ Memory Usage                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚  256 MB â”¤  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘ 80%    â”‚â”‚
â”‚ â”‚  128 MB â”¤  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                 â”‚â”‚
â”‚ â”‚    0 MB â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚
â”‚ â”‚           Used: 204.8 MB / Max: 256 MB                  â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚ ğŸ”‘ Keys                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚  Total Keys: 1,523                                      â”‚â”‚
â”‚ â”‚  Expired Keys: 234 (last hour)                          â”‚â”‚
â”‚ â”‚  Evicted Keys: 12 (last hour)                           â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚ âš¡ Operations/sec                                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚  1000 ops/s â”¤     â•­â”€â•®        â•­â”€â•®                        â”‚â”‚
â”‚ â”‚   500 ops/s â”¤  â•­â”€â”€â•¯ â•°â”€â”€â•®  â•­â”€â”€â•¯ â•°â”€â”€â•®                     â”‚â”‚
â”‚ â”‚     0 ops/s â””â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 ì•Œë¦¼ ì„¤ì • (Alerting)

**Grafana Alert ì˜ˆì‹œ:**

```yaml
# celery_worker_down.yaml
alerts:
  - alert: CeleryWorkerDown
    expr: celery_worker_up == 0
    for: 5m
    annotations:
      summary: "Celery Worker is down"
      description: "Worker {{ $labels.worker }} has been down for 5 minutes"

  - alert: HighTaskFailureRate
    expr: rate(celery_tasks_total{state="failure"}[5m]) > 10
    for: 10m
    annotations:
      summary: "High Celery task failure rate"
      description: "Task failure rate is {{ $value }} failures/sec"

  - alert: RedisMemoryHigh
    expr: redis_memory_used_bytes / redis_memory_max_bytes > 0.9
    for: 5m
    annotations:
      summary: "Redis memory usage is high"
      description: "Memory usage is {{ $value | humanizePercentage }}"
```

---

## 6. ìš”ì•½

### 6.1 ë„êµ¬ ë¹„êµ

| ë„êµ¬ | ìš©ë„ | ì¥ì  | ë‹¨ì  |
|-----|------|------|------|
| **Flower** | Celery ëª¨ë‹ˆí„°ë§ | ì‹¤ì‹œê°„, ì‘ì—… ì œì–´ ê°€ëŠ¥ | Celery ì „ìš© |
| **RedisInsight** | Redis GUI | í‚¤ í¸ì§‘, ë©”ëª¨ë¦¬ ë¶„ì„ | Redis ì „ìš© |
| **Grafana + Prometheus** | í†µí•© ëª¨ë‹ˆí„°ë§ | ì»¤ìŠ¤í…€ ëŒ€ì‹œë³´ë“œ, ì•Œë¦¼ | ì„¤ì • ë³µì¡ |
| **Sentry** | ì—ëŸ¬ ì¶”ì  | ì‹¤ì‹œê°„ ì•Œë¦¼, ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤ | ìœ ë£Œ (ë¬´ë£Œ ì œí•œ) |

### 6.2 ê¶Œì¥ êµ¬ì„±

**ê°œë°œ í™˜ê²½:**
- âœ… Flower (Celery ëª¨ë‹ˆí„°ë§)
- âœ… RedisInsight (Redis GUI)
- âœ… Django Admin (ìŠ¤ì¼€ì¤„ ê´€ë¦¬)

**í”„ë¡œë•ì…˜ í™˜ê²½:**
- âœ… Flower (Celery ëª¨ë‹ˆí„°ë§, ì¸ì¦ í™œì„±í™”)
- âœ… Grafana + Prometheus (í†µí•© ëª¨ë‹ˆí„°ë§)
- âœ… Sentry (ì—ëŸ¬ ì¶”ì , ì•Œë¦¼)
- âœ… Django Admin (ìŠ¤ì¼€ì¤„ ê´€ë¦¬)

---

**ë¬¸ì„œ ë²„ì „**: 1.0
**ìµœì¢… ìˆ˜ì •**: 2025-12-29
**ì‘ì„±ì**: NeuroNova Development Team
