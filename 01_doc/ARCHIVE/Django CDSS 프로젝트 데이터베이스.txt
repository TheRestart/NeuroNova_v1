Django CDSS 프로젝트 데이터베이스
OpenEMR 데이터베이스

다음은 내가 미리 정리해 놓은 문서이다. 
다음 파일을 고려해
'데이터베이스설계서_db설계v1.0.CSV', 
'데이터베이스설계서_컬럼v1.0.CSV'

양방향관계(상호보완)으로 하면 신규 생성이 불가함으로 주의.




참고 : 
상세 데이터 구조 및 관계 (ERD & Hierarchy)
각 시스템은 고유의 데이터 구조를 가지며, Django가 이를 논리적으로 연결합니다.

= A. Django CDSS DB (cdss_db) 
OpenEMR에서 가져온 데이터를 AI 분석 용도로 **가공하거나 캐싱(Caching)**하여 저장하는 곳입니다.
emr_patient_cache: OpenEMR의 환자 정보를 동기화하여 저장 (현재 30명 캐싱됨)
emr_encounters: 진료 기록 동기화 데이터
ocs_orders: 처방 정보 (OCS: Order Communication System)
ocs_order_items: 세부 처방 항목

= B. OpenEMR (진료 기록 저장소)
구조: 관계형 (RDBMS - MySQL)
핵심 테이블:
patient_data : 환자 인구통계학 정보 (Master Data)
lists : 진료 기록, 문제 목록 (Problem List)
prescriptions : 약물 처방 내역
연동: 레거시 시스템 역할로, 환자 등록 시 가장 먼저 데이터가 생성되는 곳.

OpenEMR DB (openemr) 실제 병원 시스템에서 발생하는 **Raw Data(원본 데이터)**가 저장되는 곳입니다.
patient_data: 환자의 인적 사항 등 기본 정보
form_encounter: 환자의 병원 방문 및 진료 기록
prescriptions: 의약품 처방 내역

= C. Orthanc (영상 저장소)
구조: 계층형 (Hierarchical)
핵심 관계:
Patient (1)
└ Study (N) : 촬영 건 (예: 2024-12-16 Brain MRI) [Key: StudyInstanceUID]
└ Series (N) : 촬영 기법 (예: T1, T2, FLAIR)
└ Instance (N) : 개별 슬라이스 이미지 (.dcm)
호출: GET /studies/{id}/series (DICOMweb 표준)

= D. HAPI FHIR (표준 데이터 저장소)
구조: 리소스 기반 (Resource-Based)
핵심 리소스:
Patient : 환자 식별 정보 (OpenEMR의 ID와 매핑)
Observation : 유전체/단백질 분석 결과 (예: MGMT Promoter Methylation Status)
DiagnosticReport : 검사 결과 통합 리포트
호출: GET /Observation?subject=Patient/{id}&code={LoincCode}


---

# Django 메인 DB
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'cdss_db',
        'USER': 'cdss_user',
        'PASSWORD': 'cdss_password',
        'HOST': 'localhost',
        'PORT': '3306',
    },
    'openemr': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'openemr',
        'MYSQL_USER': 'openemr',
        'PASSWORD': 'openemr', 
        'HOST': 'localhost',
        'PORT': '3307',  
    }
}

