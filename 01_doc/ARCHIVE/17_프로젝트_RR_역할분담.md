# 17. í”„ë¡œì íŠ¸ R&R (Roles & Responsibilities) - ì—­í•  ë° ì±…ì„ ë¶„ë‹´

**ë¬¸ì„œ ì‘ì„±ì¼**: 2025-12-24
**ì‘ì„±ì**: Project Team + Claude AI
**ë²„ì „**: 1.0

---

## ğŸ“‹ ê°œìš”

NeuroNova CDSS í”„ë¡œì íŠ¸ëŠ” **ì—­í•  ê¸°ë°˜ ê°œë°œ(Role-Based Development)**ì„ ì±„íƒí•©ë‹ˆë‹¤.
ê° íŒ€ì›ì€ ìì‹ ì˜ ì „ë¬¸ ì˜ì—­ì— ì§‘ì¤‘í•˜ë©°, ìµœì¢… í†µí•©ì€ **Interface Specification**ì„ í†µí•´ ì§„í–‰í•©ë‹ˆë‹¤.

---

## ğŸ‘¥ íŒ€ êµ¬ì„± ë° ì—­í•  ë¶„ë‹´

### 1. **AI ì½”ì–´ ê°œë°œíŒ€** (í˜„ì¬ ë‹´ë‹¹ì: ë‚˜)

**ì±…ì„ ë²”ìœ„:**
- âœ… AI ëª¨ë¸ ê°œë°œ (MRI ì¢…ì–‘ ë¶„ì„, Omics ë¶„ì„)
- âœ… ë°ì´í„° ì „ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸
- âœ… ì¶”ë¡  ë¡œì§ êµ¬í˜„
- âœ… ëª¨ë¸ í•™ìŠµ ë° í‰ê°€
- âœ… Interface Specification ë¬¸ì„œ ì‘ì„±

**ì œì™¸ ì‚¬í•­:**
- âŒ Backend Serving (Flask API)
- âŒ Web Frontend (React)
- âŒ Mobile App (Flutter)

**ì‚°ì¶œë¬¼:**
- Python ëª¨ë“ˆ (ë…ë¦½ ì‹¤í–‰ ê°€ëŠ¥)
- í•™ìŠµëœ ëª¨ë¸ íŒŒì¼ (.pth, .h5 ë“±)
- Interface Specification ë¬¸ì„œ
- requirements.txt
- Dockerfile (AI í™˜ê²½)

---

### 2. **Backend Serving íŒ€** (íƒ€ íŒ€ì› ë‹´ë‹¹)

**ì±…ì„ ë²”ìœ„:**
- Flask API ì„œë²„ êµ¬í˜„
- AI ëª¨ë¸ í˜¸ì¶œ ë° ê²°ê³¼ ë°˜í™˜
- RabbitMQ Queue ì²˜ë¦¬
- Djangoì™€ì˜ REST API í†µì‹ 

**ì‚°ì¶œë¬¼:**
- Flask ì„œë²„ ì½”ë“œ
- API ì—”ë“œí¬ì¸íŠ¸ ëª…ì„¸ì„œ
- Docker ì»¨í…Œì´ë„ˆ

---

### 3. **Frontend íŒ€** (íƒ€ íŒ€ì› ë‹´ë‹¹)

**ì±…ì„ ë²”ìœ„:**
- React Web UI (ì˜ë£Œì§„ìš©)
- Flutter Mobile App (í™˜ììš©)
- Django API ì—°ë™

**ì‚°ì¶œë¬¼:**
- React ì»´í¬ë„ŒíŠ¸
- Flutter ì•±
- UI/UX ë¬¸ì„œ

---

### 4. **Backend Infrastructure íŒ€** (í˜„ì¬ êµ¬ì¶• ì™„ë£Œ)

**ì±…ì„ ë²”ìœ„:**
- Django REST API (UC01~UC06)
- MySQL ë°ì´í„°ë² ì´ìŠ¤
- OpenEMR, Orthanc, HAPI FHIR ì—°ë™

**í˜„ì¬ ìƒíƒœ:** âœ… êµ¬ì¶• ì™„ë£Œ (Week 4)

---

## ğŸ“… ê°œë°œ ì¼ì • ì „ëµ

### Phase 1: ë…ë¦½ ê°œë°œ (í˜„ì¬ ë‹¨ê³„)
**ê¸°ê°„:** Week 5 ~ Week 12

ê° íŒ€ì€ ìì‹ ì˜ ì˜ì—­ì—ë§Œ ì§‘ì¤‘í•˜ì—¬ ê°œë°œí•©ë‹ˆë‹¤.

```
AI ì½”ì–´ íŒ€       â†’ ëª¨ë¸ ê°œë°œ + ì „ì²˜ë¦¬ + ì¶”ë¡  ë¡œì§
Backend íŒ€       â†’ Flask API + Queue ì²˜ë¦¬
Frontend íŒ€      â†’ React UI + Flutter App
```

**í•µì‹¬ ì›ì¹™:**
- ğŸ”’ **íƒ€ íŒ€ ì½”ë“œì— ì˜ì¡´í•˜ì§€ ì•ŠìŒ**
- ğŸ”’ **ë…ë¦½ ì‹¤í–‰ ê°€ëŠ¥í•œ ëª¨ë“ˆ ê°œë°œ**
- ğŸ”’ **Mock Dataë¡œ í…ŒìŠ¤íŠ¸**

---

### Phase 2: Interface Specification ì‘ì„±
**ê¸°ê°„:** Week 13

ê° íŒ€ì€ ìì‹ ì˜ ëª¨ë“ˆì„ ë‹¤ë¥¸ íŒ€ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ **ì—°ë™ ëª…ì„¸ì„œ**ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.

**AI ì½”ì–´ íŒ€ì˜ ëª…ì„¸ì„œ í•­ëª©:**
1. Input Data Specification (ì…ë ¥ ë°ì´í„° í˜•ì‹)
2. Output Data Specification (ì¶œë ¥ ë°ì´í„° í˜•ì‹)
3. Dependency List (ì˜ì¡´ì„± ëª©ë¡)
4. Inference Function Signature (ì¶”ë¡  í•¨ìˆ˜ ëª…ì„¸)
5. Error Handling (ì˜ˆì™¸ ì²˜ë¦¬)
6. Performance Metrics (ì„±ëŠ¥ ì§€í‘œ)

---

### Phase 3: í†µí•© ë° í…ŒìŠ¤íŠ¸
**ê¸°ê°„:** Week 14 ~ Week 15

Interface Specificationì„ ê¸°ë°˜ìœ¼ë¡œ ê° ëª¨ë“ˆì„ í†µí•©í•©ë‹ˆë‹¤.

```
Django â†’ RabbitMQ â†’ Flask AI Server â†’ AI ëª¨ë¸
                         â†“
                     ì¶”ë¡  ê²°ê³¼
                         â†“
                    Django DB ì €ì¥
```

---

### Phase 4: ìµœì¢… ë°°í¬
**ê¸°ê°„:** Week 16

ì „ì²´ ì‹œìŠ¤í…œ í†µí•© í…ŒìŠ¤íŠ¸ ë° ë°°í¬

---

## ğŸ”§ AI ì½”ì–´ ê°œë°œ ê°€ì´ë“œ

### ê°œë°œ ì›ì¹™

1. **ë…ë¦½ ì‹¤í–‰ ê°€ëŠ¥ (Self-Contained)**
   - Flask, React, Flutter ì½”ë“œë¥¼ í¬í•¨í•˜ì§€ ì•ŠìŒ
   - Python ëª¨ë“ˆë§Œìœ¼ë¡œ ì™„ê²°ëœ ê¸°ëŠ¥ êµ¬í˜„

2. **ì…/ì¶œë ¥ ëª…í™•í™” (Clear I/O)**
   - ì…ë ¥: NumPy Array, Tensor, JSON
   - ì¶œë ¥: êµ¬ì¡°í™”ëœ ë”•ì…”ë„ˆë¦¬ ë˜ëŠ” JSON

3. **ì—„ê²©í•œ ìŠ¤í‚¤ë§ˆ ì •ì˜ (Strict Schema)**
   - Pydantic, dataclass ì‚¬ìš©
   - íƒ€ì… íŒíŠ¸ í•„ìˆ˜

4. **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (Unit Testing)**
   - pytestë¡œ ëª¨ë“  í•¨ìˆ˜ í…ŒìŠ¤íŠ¸
   - Mock Data í™œìš©

---

### ë””ë ‰í† ë¦¬ êµ¬ì¡° (AI ì½”ì–´)

```
NeuroNova_v1/
â”œâ”€â”€ 05_ai_core/                      # AI ì½”ì–´ ëª¨ë“ˆ (ì‹ ê·œ ìƒì„±)
â”‚   â”œâ”€â”€ models/                      # AI ëª¨ë¸ ì •ì˜
â”‚   â”‚   â”œâ”€â”€ tumor_classification.py  # MRI ì¢…ì–‘ ë¶„ë¥˜ ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ segmentation.py          # ì¢…ì–‘ ì„¸ê·¸ë©˜í…Œì´ì…˜ ëª¨ë¸
â”‚   â”‚   â””â”€â”€ omics_analysis.py        # Omics ë¶„ì„ ëª¨ë¸
â”‚   â”œâ”€â”€ preprocessing/               # ì „ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸
â”‚   â”‚   â”œâ”€â”€ mri_preprocessing.py     # MRI ì´ë¯¸ì§€ ì „ì²˜ë¦¬
â”‚   â”‚   â”œâ”€â”€ dicom_parser.py          # DICOM íŒŒì‹±
â”‚   â”‚   â””â”€â”€ data_augmentation.py     # ë°ì´í„° ì¦ê°•
â”‚   â”œâ”€â”€ inference/                   # ì¶”ë¡  ë¡œì§
â”‚   â”‚   â”œâ”€â”€ inference_engine.py      # ì¶”ë¡  ì—”ì§„
â”‚   â”‚   â””â”€â”€ postprocessing.py        # í›„ì²˜ë¦¬
â”‚   â”œâ”€â”€ utils/                       # ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”œâ”€â”€ config.py                # ì„¤ì • íŒŒì¼
â”‚   â”‚   â””â”€â”€ logger.py                # ë¡œê¹…
â”‚   â”œâ”€â”€ tests/                       # ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
â”‚   â”‚   â”œâ”€â”€ test_models.py
â”‚   â”‚   â””â”€â”€ test_preprocessing.py
â”‚   â”œâ”€â”€ interface_spec.md            # ğŸ”¥ Interface Specification
â”‚   â”œâ”€â”€ requirements.txt             # Python ì˜ì¡´ì„±
â”‚   â”œâ”€â”€ Dockerfile                   # AI í™˜ê²½ Docker
â”‚   â””â”€â”€ README.md                    # ì‚¬ìš© ê°€ì´ë“œ
â””â”€â”€ 06_trained_models/               # í•™ìŠµëœ ëª¨ë¸ íŒŒì¼
    â”œâ”€â”€ tumor_classifier_v1.pth
    â””â”€â”€ segmentation_v1.h5
```

---

## ğŸ“ Interface Specification í…œí”Œë¦¿

AI ì½”ì–´ íŒ€ì€ ê°œë°œ ì™„ë£Œ ì‹œ ë‹¤ìŒ í˜•ì‹ì˜ ë¬¸ì„œë¥¼ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤.

### ì˜ˆì‹œ: MRI ì¢…ì–‘ ë¶„ë¥˜ ëª¨ë¸

```markdown
# Interface Specification: MRI Tumor Classification

## 1. Input Data Specification

**ë°ì´í„° íƒ€ì…:** NumPy Array
**í˜•íƒœ (Shape):** `(batch_size, channels, height, width, depth)`
- batch_size: ë°°ì¹˜ í¬ê¸° (ê¸°ë³¸ê°’: 1)
- channels: 1 (Grayscale MRI)
- height: 256
- width: 256
- depth: 128

**ì „ì²˜ë¦¬ í•„ìˆ˜ ì¡°ê±´:**
- DICOM â†’ NumPy ë³€í™˜ ì™„ë£Œ
- HU ê°’ ì •ê·œí™” (-1000 ~ 3000 â†’ 0 ~ 1)
- Resampling: 1mm x 1mm x 1mm

**ì˜ˆì‹œ ì½”ë“œ:**
```python
import numpy as np
from ai_core.preprocessing import preprocess_mri

# DICOM íŒŒì¼ ê²½ë¡œ
dicom_path = "/path/to/mri/study"

# ì „ì²˜ë¦¬
input_tensor = preprocess_mri(dicom_path)
# Shape: (1, 1, 256, 256, 128)
```

## 2. Output Data Specification

**ë°ì´í„° íƒ€ì…:** Python Dictionary
**êµ¬ì¡°:**
```json
{
    "prediction": {
        "class": "glioblastoma",
        "confidence": 0.92,
        "probabilities": {
            "glioblastoma": 0.92,
            "meningioma": 0.05,
            "pituitary_adenoma": 0.03
        }
    },
    "metadata": {
        "model_version": "v1.0",
        "inference_time_ms": 234,
        "timestamp": "2025-12-24T10:30:00Z"
    }
}
```

## 3. Dependency List

**requirements.txt:**
```
torch==2.0.1
torchvision==0.15.2
numpy==1.24.3
pydicom==2.3.1
SimpleITK==2.2.1
```

**Python ë²„ì „:** 3.10+
**CUDA:** 11.8 (GPU ì¶”ë¡  ì‹œ)

## 4. Inference Function Signature

```python
def predict_tumor_type(
    input_tensor: np.ndarray,
    model_path: str = "./models/tumor_classifier_v1.pth",
    device: str = "cuda"
) -> dict:
    """
    MRI ì´ë¯¸ì§€ë¡œë¶€í„° ì¢…ì–‘ ìœ í˜• ì˜ˆì¸¡

    Args:
        input_tensor: ì „ì²˜ë¦¬ëœ MRI í…ì„œ (1, 1, 256, 256, 128)
        model_path: í•™ìŠµëœ ëª¨ë¸ íŒŒì¼ ê²½ë¡œ
        device: 'cuda' ë˜ëŠ” 'cpu'

    Returns:
        ì˜ˆì¸¡ ê²°ê³¼ ë”•ì…”ë„ˆë¦¬ (ìœ„ Output Spec ì°¸ì¡°)

    Raises:
        ValueError: input_tensor í˜•íƒœê°€ ì˜ëª»ëœ ê²½ìš°
        FileNotFoundError: model_pathê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš°
    """
    pass
```

## 5. Error Handling

**Exception ì¢…ë¥˜:**
- `ValueError`: ì…ë ¥ ë°ì´í„° í˜•íƒœ ì˜¤ë¥˜
- `FileNotFoundError`: ëª¨ë¸ íŒŒì¼ ì—†ìŒ
- `RuntimeError`: GPU ë©”ëª¨ë¦¬ ë¶€ì¡±
- `ModelLoadError`: ëª¨ë¸ ë¡œë“œ ì‹¤íŒ¨

## 6. Performance Metrics

- **ì¶”ë¡  ì‹œê°„:** í‰ê·  250ms (GPU), 2.5s (CPU)
- **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰:** 2GB (GPU), 4GB (CPU)
- **ì •í™•ë„:** 92.5% (Test Set)
- **F1 Score:** 0.91
```

---

## ğŸš€ AI ê°œë°œ ì›Œí¬í”Œë¡œìš°

### Step 1: ëª¨ë¸ ê°œë°œ
```bash
cd 05_ai_core
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt

# ëª¨ë¸ í•™ìŠµ
python train.py --config configs/tumor_classifier.yaml

# í‰ê°€
python evaluate.py --model models/tumor_classifier_v1.pth
```

### Step 2: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
```bash
pytest tests/ -v
```

### Step 3: Interface Specification ì‘ì„±
```bash
# interface_spec.md ì‘ì„± (ìœ„ í…œí”Œë¦¿ ì°¸ì¡°)
```

### Step 4: Docker ì´ë¯¸ì§€ ë¹Œë“œ
```bash
docker build -t neuronova-ai:v1.0 .
docker run --gpus all -p 5000:5000 neuronova-ai:v1.0
```

### Step 5: íŒ€ì›ì—ê²Œ ì „ë‹¬
- `interface_spec.md`
- `requirements.txt`
- `Dockerfile`
- `trained_models/`

---

## ğŸ”’ ë³´ì•ˆ ë° ê·œì¹™

1. **íƒ€ íŒ€ ì½”ë“œ ì˜ì¡´ ê¸ˆì§€**
   - Flask, React, Flutter ì½”ë“œë¥¼ importí•˜ì§€ ì•ŠìŒ

2. **í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš©**
   - ëª¨ë¸ ê²½ë¡œ, GPU ì„¤ì • ë“±ì€ í™˜ê²½ ë³€ìˆ˜ë¡œ ê´€ë¦¬

3. **ë¡œê¹… í•„ìˆ˜**
   - ëª¨ë“  ì¶”ë¡  ìš”ì²­ê³¼ ê²°ê³¼ë¥¼ ë¡œê·¸ë¡œ ê¸°ë¡

4. **ë²„ì „ ê´€ë¦¬**
   - ëª¨ë¸ íŒŒì¼ì— ë²„ì „ ë²ˆí˜¸ ëª…ì‹œ (v1.0, v1.1 ë“±)

---

## ğŸ“Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

AI ì½”ì–´ ê°œë°œ ì™„ë£Œ ì‹œ ë‹¤ìŒ í•­ëª©ì„ í™•ì¸í•˜ì„¸ìš”:

- [ ] ëª¨ë¸ ë…ë¦½ ì‹¤í–‰ ê°€ëŠ¥ (Flask/React ì—†ì´)
- [ ] Input/Output ìŠ¤í‚¤ë§ˆ ëª…í™•íˆ ì •ì˜
- [ ] Interface Specification ë¬¸ì„œ ì‘ì„±
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ í†µê³¼ (pytest)
- [ ] requirements.txt ì‘ì„±
- [ ] Dockerfile ì‘ì„±
- [ ] README.md ì‘ì„± (ì‚¬ìš©ë²•)
- [ ] í•™ìŠµëœ ëª¨ë¸ íŒŒì¼ ì €ì¥
- [ ] ì„±ëŠ¥ ì§€í‘œ ë¬¸ì„œí™” (ì •í™•ë„, ì†ë„)

---

**ìµœì¢… ìˆ˜ì •ì¼**: 2025-12-24
**ì‘ì„±ì**: Claude AI
**ë²„ì „**: 1.0
