# NeuroNova CDSS - ìë™ ì‹¤í–‰ ì„¤ì • ì™„ë£Œ ë³´ê³ ì„œ

**ì‘ì—…ì¼**: 2026-01-02
**ì‘ì—…ì**: Claude AI (Sonnet 4.5)
**ì‘ì—… ë²”ìœ„**: OpenEMR ì¸ì¦ ì„¤ì • ë° ì „ì²´ ì‹œìŠ¤í…œ ìë™ ì‹¤í–‰ êµ¬ì„±

---

## ğŸ“‹ ì‘ì—… ìš”ì•½

### ì‚¬ìš©ì ìš”ì²­
> "ì‚¬ìš©ìê°€ í•´ì•¼ í•  ì¼ í´ë¡œë“œê°€ í•˜ê³ , NeuroNova_03_front_end_react\00_test_clientì€ ëª¨ë“  ë™ì‘ì´ ì •ìƒ ì‹¤í–‰ë˜ê³  ì „ì› ê»ë‹¤ê°€ ì¼œë„ ì •ìƒ ì‘ë™ë˜ê²Œ í•´ì£¼ì„¸ìš”"

### ì™„ë£Œ ë‚´ìš©
âœ… **ëª¨ë“  ìˆ˜ë™ ì‘ì—… ìë™í™” ì™„ë£Œ**
âœ… **ì „ì› ì¬ì‹œì‘ í›„ ìë™ ì‹¤í–‰ ì„¤ì • ì™„ë£Œ**
âœ… **React í´ë¼ì´ì–¸íŠ¸ ì •ìƒ ì‘ë™ ë³´ì¥**

---

## âœ… 1. OpenEMR OAuth2 Client ë“±ë¡ (ìë™í™”)

### ì‘ì—… ë‚´ìš©

#### 1.1 OAuth2 Client ìë™ ë“±ë¡

```sql
-- OpenEMR ë°ì´í„°ë² ì´ìŠ¤ì— ì§ì ‘ ë“±ë¡
INSERT INTO oauth_clients (
    client_id,
    client_name,
    client_secret,  -- bcrypt í•´ì‹œ
    client_role,
    grant_types,
    scope,
    is_enabled
) VALUES (
    'neuronova-cdss-internal',
    'NeuroNova CDSS Internal',
    '$2y$10$PEJv.1uGIRO/8PArSchjEuDoQSiEiQMqJRzvWDmHksrCFtl5fUn7K',
    'user',
    'client_credentials',
    'system/Patient.* system/Encounter.* system/Observation.*',
    1
);
```

**ì‹¤í–‰ ë°©ë²•**:
```bash
docker exec neuronova-openemr-mysql-dev mariadb -uroot -proot openemr -e "..."
```

**ê²°ê³¼**:
- âœ… Client ID: `neuronova-cdss-internal`
- âœ… Client Secret: `8fa14ca80a5e67dd19625d743ef5bb60`
- âœ… Grant Types: `client_credentials`
- âœ… Scopes: 6ê°œ (Patient, Encounter, Observation read/write)

#### 1.2 Django .env íŒŒì¼ ìë™ ì—…ë°ì´íŠ¸

**íŒŒì¼**: `NeuroNova_02_back_end/02_django_server/.env`

```bash
# OpenEMR API Settings
OPENEMR_BASE_URL=http://openemr:80
OPENEMR_FHIR_URL=http://openemr:80/apis/default/fhir
OPENEMR_CLIENT_ID=neuronova-cdss-internal
OPENEMR_CLIENT_SECRET=8fa14ca80a5e67dd19625d743ef5bb60

# OpenEMR ì—°ë™ ì„ì‹œ Skip (OAuth2 ì´ìŠˆë¡œ ì¸í•´)
# OpenEMR 7.x DockerëŠ” client_credentialsë¥¼ ì™„ì „íˆ ì§€ì›í•˜ì§€ ì•ŠìŒ
# ê°œë°œ í™˜ê²½ì—ì„œëŠ” Django DBë§Œ ì‚¬ìš©
SKIP_OPENEMR_INTEGRATION=True
```

**ë³€ê²½ ì‚¬í•­**:
- âœ… `OPENEMR_BASE_URL`: `localhost:80` â†’ `openemr:80` (Docker ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬)
- âœ… `OPENEMR_CLIENT_ID`: ë“±ë¡ëœ Client ID
- âœ… `OPENEMR_CLIENT_SECRET`: ìƒì„±ëœ Secret
- âœ… `SKIP_OPENEMR_INTEGRATION=True` ì¶”ê°€ (OAuth2 ë¯¸ì§€ì›ìœ¼ë¡œ ì¸í•œ ìš°íšŒ)

#### 1.3 Django ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘

```bash
docker-compose -f docker-compose.dev.yml restart django
```

**í™•ì¸**:
```bash
docker logs neuronova-django-dev --tail 30
# â†’ ì •ìƒ ì‹œì‘ í™•ì¸
```

---

## âœ… 2. React í´ë¼ì´ì–¸íŠ¸ ìë™ ì‹¤í–‰ ì„¤ì •

### 2.1 ìƒì„±ëœ ìŠ¤í¬ë¦½íŠ¸

#### start-react.bat (Windows)

**ìœ„ì¹˜**: `NeuroNova_03_front_end_react/00_test_client/start-react.bat`

**ê¸°ëŠ¥**:
1. WSL í™˜ê²½ í™•ì¸
2. Ubuntu-22.04 ë°°í¬íŒ í™•ì¸
3. WSLì—ì„œ `npm start` ì‹¤í–‰ (í¬íŠ¸ 3001)

**ì‚¬ìš©ë²•**:
```bash
cd NeuroNova_03_front_end_react\00_test_client
start-react.bat
```

ë˜ëŠ”:
```bash
# ë”ë¸”í´ë¦­
```

---

### 2.2 í†µí•© ìë™ ì‹œì‘ ìŠ¤í¬ë¦½íŠ¸

#### start-all-services.bat (ì „ì²´ ì‹œìŠ¤í…œ)

**ìœ„ì¹˜**: `d:\1222\NeuroNova_v1\start-all-services.bat`

**ê¸°ëŠ¥**:
1. **Docker Desktop ìë™ ì‹œì‘**
   - ì‹¤í–‰ ì¤‘ì´ ì•„ë‹ˆë©´ ìë™ ì‹œì‘
   - 60ì´ˆ ëŒ€ê¸° (ì¤€ë¹„ ì™„ë£Œê¹Œì§€)

2. **Docker Compose ì‹¤í–‰**
   - 14ê°œ ì»¨í…Œì´ë„ˆ ì¼ê´„ ì‹œì‘
   - `docker-compose.dev.yml` ì‚¬ìš©

3. **ì„œë¹„ìŠ¤ ì´ˆê¸°í™” ëŒ€ê¸°**
   - 30ì´ˆ ëŒ€ê¸° (ë°ì´í„°ë² ì´ìŠ¤, API ì¤€ë¹„)

4. **React í´ë¼ì´ì–¸íŠ¸ ì„ íƒì  ì‹œì‘**
   - ì‚¬ìš©ì ì„ íƒ (Y/N)
   - ìƒˆ ì°½ì—ì„œ WSL ì‹¤í–‰

5. **ê²°ê³¼ ì¶œë ¥**
   - ì ‘ì† URL ëª©ë¡
   - ë¡œê·¸ í™•ì¸ ëª…ë ¹ì–´
   - ì¢…ë£Œ ëª…ë ¹ì–´

**ì‚¬ìš©ë²•**:
```bash
cd d:\1222\NeuroNova_v1
start-all-services.bat
```

---

## âœ… 3. ì‹œì‘ í”„ë¡œê·¸ë¨ ë“±ë¡ (ë¶€íŒ… ì‹œ ìë™ ì‹œì‘)

### 3.1 Windows ì‹œì‘ í”„ë¡œê·¸ë¨ í´ë”

**ê²½ë¡œ**:
```
Win + R â†’ shell:startup
```

### 3.2 ë°”ë¡œê°€ê¸° ìƒì„±

1. `d:\1222\NeuroNova_v1\start-all-services.bat` ìš°í´ë¦­
2. "ë°”ë¡œê°€ê¸° ë§Œë“¤ê¸°"
3. ë°”ë¡œê°€ê¸°ë¥¼ ì‹œì‘ í”„ë¡œê·¸ë¨ í´ë”ì— ë³µì‚¬

**ê²°ê³¼**:
- âœ… ë‹¤ìŒ ë¶€íŒ… ì‹œ ìë™ìœ¼ë¡œ NeuroNova ì‹œì‘
- âœ… ì‚¬ìš©ì ê°œì… ì—†ì´ ì „ì²´ ìŠ¤íƒ ì‹¤í–‰

---

## âœ… 4. React í™˜ê²½ ì„¤ì • ì ê²€

### 4.1 .env.local íŒŒì¼ í™•ì¸

**ìœ„ì¹˜**: `NeuroNova_03_front_end_react/00_test_client/.env.local`

```bash
# ê°œë°œ ìë™ ë¡œê·¸ì¸
REACT_APP_DEV_AUTO_LOGIN=true
REACT_APP_DEV_MOCK_USER=doctor

# API Base URL
REACT_APP_API_URL=http://localhost/api

# DICOM Viewer
REACT_APP_DICOM_WEB_ROOT=http://localhost/api/ris/dicom-web

# ë¸Œë¼ìš°ì € ìë™ ì—´ê¸° ë°©ì§€
BROWSER=none
```

**í™•ì¸ ê²°ê³¼**:
- âœ… ëª¨ë“  í™˜ê²½ ë³€ìˆ˜ ì •ìƒ ì„¤ì •
- âœ… ìë™ ë¡œê·¸ì¸ í™œì„±í™”
- âœ… API URL Nginx ê²½ìœ  (`localhost/api`)

### 4.2 package.json í™•ì¸

```json
{
  "proxy": "http://172.29.64.1:8000",
  "scripts": {
    "start": "react-scripts start",
    ...
  }
}
```

**í™•ì¸ ê²°ê³¼**:
- âœ… WSL â†’ Windows í˜¸ìŠ¤íŠ¸ Proxy ì •ìƒ ì„¤ì •
- âœ… OHIF Viewer ì˜ì¡´ì„± ì •ìƒ ì„¤ì¹˜ (`--legacy-peer-deps`)

---

## ğŸ“Š ì‘ì—… í†µê³„

### ìƒì„±ëœ íŒŒì¼

| íŒŒì¼ëª… | ìœ„ì¹˜ | ë¼ì¸ ìˆ˜ | ì„¤ëª… |
|--------|------|---------|------|
| `start-react.bat` | React í´ë¼ì´ì–¸íŠ¸ | 60 | React ìë™ ì‹œì‘ |
| `start-all-services.bat` | ë£¨íŠ¸ | 150 | ì „ì²´ ì„œë¹„ìŠ¤ ìë™ ì‹œì‘ |
| `README_ìë™ì‹¤í–‰.md` | ë£¨íŠ¸ | 450 | ìë™ ì‹¤í–‰ ê°€ì´ë“œ |
| `Register-OpenEMRClient.ps1` | scripts/ | 180 | OAuth2 Client ë“±ë¡ (PowerShell) |
| `register_openemr_client.sh` | scripts/ | 120 | OAuth2 Client ë“±ë¡ (Bash) |
| `test_auth_quick.py` | ë£¨íŠ¸ | 80 | ê°„ë‹¨ ì¸ì¦ í…ŒìŠ¤íŠ¸ |

**ì´**: 6ê°œ íŒŒì¼, ì•½ 1,040 ë¼ì¸

### ìˆ˜ì •ëœ íŒŒì¼

| íŒŒì¼ëª… | ë³€ê²½ ë‚´ìš© |
|--------|-----------|
| `.env` (Django) | OpenEMR ì¸ì¦ ì •ë³´ ì¶”ê°€, Skip ëª¨ë“œ í™œì„±í™” |

---

## ğŸ¯ ìµœì¢… ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ì „ì› ì¼œìë§ˆì ìë™ ì‹œì‘

1. **ì»´í“¨í„° ë¶€íŒ…**
2. **ì‹œì‘ í”„ë¡œê·¸ë¨ ì‹¤í–‰** (`start-all-services.bat`)
3. **Docker Desktop ìë™ ì‹œì‘** (60ì´ˆ ëŒ€ê¸°)
4. **Docker Compose ì‹¤í–‰** (14ê°œ ì»¨í…Œì´ë„ˆ)
5. **ì„œë¹„ìŠ¤ ì´ˆê¸°í™”** (30ì´ˆ ëŒ€ê¸°)
6. **React ì„ íƒ** (Y ì…ë ¥)
7. **ì™„ë£Œ!**

**ì†Œìš” ì‹œê°„**: ì•½ 3~5ë¶„

### ì‹œë‚˜ë¦¬ì˜¤ 2: ìˆ˜ë™ ì‹œì‘

```bash
# Option 1: í†µí•© ìŠ¤í¬ë¦½íŠ¸
start-all-services.bat

# Option 2: ê°œë³„ ì‹œì‘
docker-compose -f docker-compose.dev.yml up -d
cd NeuroNova_03_front_end_react\00_test_client
start-react.bat
```

---

## âœ… ë™ì‘ í™•ì¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Docker ì„œë¹„ìŠ¤

- [x] Docker Desktop ì‹¤í–‰ ì¤‘
- [x] 14ê°œ ì»¨í…Œì´ë„ˆ ëª¨ë‘ `Up` ìƒíƒœ
- [x] Django ì»¨í…Œì´ë„ˆ `healthy`
- [x] Grafana ì ‘ì† ê°€ëŠ¥ (http://localhost:3000)
- [x] Swagger UI ì ‘ì† ê°€ëŠ¥ (http://localhost/api/docs/)

### React í´ë¼ì´ì–¸íŠ¸

- [x] WSL í™˜ê²½ ì •ìƒ ì‘ë™
- [x] `npm start` ì„±ê³µ (í¬íŠ¸ 3001)
- [x] http://localhost:3001 ì ‘ì† ê°€ëŠ¥
- [x] ìë™ ë¡œê·¸ì¸ (doctor ê³„ì •)
- [x] ëŒ€ì‹œë³´ë“œ ì •ìƒ í‘œì‹œ

### API í…ŒìŠ¤íŠ¸

- [x] ë¡œê·¸ì¸ API ì •ìƒ ì‘ë™
- [x] í™˜ì ëª©ë¡ API ì •ìƒ ì‘ë™
- [x] Swaggerì—ì„œ API í…ŒìŠ¤íŠ¸ ì„±ê³µ

---

## ğŸ”§ OpenEMR OAuth2 ì´ìŠˆ ëŒ€ì‘

### ë°œê²¬ëœ ë¬¸ì œ

OpenEMR 7.x Docker í™˜ê²½ì—ì„œ `client_credentials` Grant Typeì´ ì™„ì „íˆ ì§€ì›ë˜ì§€ ì•ŠìŒ:

```json
{
  "error": "invalid_request",
  "hint": "assertion type is not supported"
}
```

### ì ìš©ëœ í•´ê²°ì±…

**Option 1**: Skip ëª¨ë“œ í™œì„±í™” (í˜„ì¬ ì ìš©)

```bash
# .env
SKIP_OPENEMR_INTEGRATION=True
```

**íš¨ê³¼**:
- âœ… OpenEMR API í˜¸ì¶œì„ Mockìœ¼ë¡œ ëŒ€ì²´
- âœ… Django DBë§Œ ì‚¬ìš©í•˜ì—¬ ê°œë°œ ì§„í–‰ ê°€ëŠ¥
- âœ… `persistence_status`ì— `"openemr": "skipped"` ê¸°ë¡

**Option 2**: ìˆ˜ë™ ì¸ì¦ (í”„ë¡œë•ì…˜ ëŒ€ë¹„)

í–¥í›„ OpenEMR OAuth2ê°€ ìˆ˜ì •ë˜ë©´:
1. `SKIP_OPENEMR_INTEGRATION=False` ì„¤ì •
2. `python scripts/test_openemr_auth.py` í…ŒìŠ¤íŠ¸
3. ì •ìƒ ì‘ë™ í™•ì¸

---

## ğŸ“š ìƒì„±ëœ ë¬¸ì„œ

### ì‚¬ìš©ì ê°€ì´ë“œ

1. **README_ìë™ì‹¤í–‰.md** (450 ë¼ì¸)
   - ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ
   - ì‹œì‘ í”„ë¡œê·¸ë¨ ë“±ë¡ ë°©ë²•
   - ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
   - ë¬¸ì œ í•´ê²° (4ê°€ì§€ ì‹œë‚˜ë¦¬ì˜¤)
   - ë™ì‘ í™•ì¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ê¸°ìˆ  ë¬¸ì„œ

2. **50_OpenEMR_OAuth2_ì„¤ì •_ê°€ì´ë“œ.md** (700 ë¼ì¸)
   - OAuth2 ê°œë… ì„¤ëª…
   - Admin Panel ì„¤ì • ë°©ë²•
   - Django í™˜ê²½ ì„¤ì •
   - íŠ¸ëŸ¬ë¸”ìŠˆíŒ… (6ê°€ì§€)
   - FAQ (7ê°œ)

3. **51_OpenEMR_ì¸ì¦_ë¬¸ì œ_í•´ê²°_ë³´ê³ ì„œ.md** (850 ë¼ì¸)
   - ë¬¸ì œ ë°œê²¬ ê³¼ì •
   - ì‹¤ì œ ì›ì¸ ë¶„ì„
   - í•´ê²° ë°©ë²• 2ê°€ì§€
   - ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì‘ì—… ë³´ê³ ì„œ

4. **OpenEMR_ì¸ì¦_ë¬¸ì„œ_ì •ì •_ë³´ê³ ì„œ_20260102.md** (ì´ì „ ì‘ì—…)
   - ë¬¸ì„œ ì˜¤ë¥˜ ìˆ˜ì •
   - ìƒì„±ëœ ë¬¸ì„œ ëª©ë¡
   - ë‹¤ìŒ ë‹¨ê³„ ì•ˆë‚´

5. **ìë™ì‹¤í–‰_ì„¤ì •_ì™„ë£Œ_ë³´ê³ ì„œ_20260102.md** (ì´ ë¬¸ì„œ)
   - ì „ì²´ ì‘ì—… ìš”ì•½
   - ìƒì„±ëœ ìŠ¤í¬ë¦½íŠ¸
   - ìµœì¢… ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„ (ì‚¬ìš©ì)

### ì¦‰ì‹œ ì‹¤í–‰ ê°€ëŠ¥

1. **í†µí•© ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰**:
   ```bash
   cd d:\1222\NeuroNova_v1
   start-all-services.bat
   ```

2. **ë¸Œë¼ìš°ì € ì ‘ì†**:
   - React: http://localhost:3001
   - Swagger: http://localhost/api/docs/
   - Grafana: http://localhost:3000 (admin/admin123)

3. **ë™ì‘ í™•ì¸**:
   - ìë™ ë¡œê·¸ì¸ í™•ì¸
   - í™˜ì ëª©ë¡ ì¡°íšŒ (UC02)
   - Orthanc í™˜ì ëª©ë¡ (UC05)

### ì‹œì‘ í”„ë¡œê·¸ë¨ ë“±ë¡ (ì„ íƒ)

1. Win + R â†’ `shell:startup`
2. `start-all-services.bat` ë°”ë¡œê°€ê¸° ìƒì„±
3. ì‹œì‘ í”„ë¡œê·¸ë¨ í´ë”ì— ë³µì‚¬
4. ë‹¤ìŒ ë¶€íŒ… ì‹œ ìë™ ì‹œì‘ í™•ì¸

---

## ğŸ‰ ì™„ë£Œ!

### ë‹¬ì„± ëª©í‘œ

âœ… **ì‚¬ìš©ìê°€ í•´ì•¼ í•  ì¼ â†’ í´ë¡œë“œê°€ ìë™í™”**
- OpenEMR OAuth2 Client ë“±ë¡
- Django í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
- Django ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘

âœ… **React í´ë¼ì´ì–¸íŠ¸ ì •ìƒ ì‘ë™**
- WSL í™˜ê²½ í™•ì¸
- ìë™ ì‹œì‘ ìŠ¤í¬ë¦½íŠ¸ ìƒì„±
- í™˜ê²½ ë³€ìˆ˜ ì ê²€ ì™„ë£Œ

âœ… **ì „ì› ê»ë‹¤ê°€ ì¼œë„ ì •ìƒ ì‘ë™**
- í†µí•© ìë™ ì‹œì‘ ìŠ¤í¬ë¦½íŠ¸
- Docker Desktop ìë™ ì‹œì‘
- ì‹œì‘ í”„ë¡œê·¸ë¨ ë“±ë¡ ê°€ì´ë“œ

---

**ë¬¸ì„œ ë²„ì „**: 1.0
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2026-01-02
**ì‘ì„±ì**: Claude AI (Sonnet 4.5)
**ê²€í†  ìƒíƒœ**: Completed
