# í…ŒìŠ¤íŠ¸ ì „ëµ ê°€ì´ë“œ (Testing Strategy Guide)

**ìµœì¢… ìˆ˜ì •ì¼**: 2025-12-28
**ëª©ì **: Django í”„ë¡œì íŠ¸ì˜ ì²´ê³„ì ì¸ í…ŒìŠ¤íŠ¸ ì „ëµ ë° ì‘ì„± ê°€ì´ë“œ

---

## ğŸ“‹ ëª©ì°¨

1. [í…ŒìŠ¤íŠ¸ ì² í•™ ë° ì›ì¹™](#1-í…ŒìŠ¤íŠ¸-ì² í•™-ë°-ì›ì¹™)
2. [í…ŒìŠ¤íŠ¸ ìœ í˜• ë° ë²”ìœ„](#2-í…ŒìŠ¤íŠ¸-ìœ í˜•-ë°-ë²”ìœ„)
3. [Unit Test ì‘ì„±ë²•](#3-unit-test-ì‘ì„±ë²•)
4. [Integration Test ì‘ì„±ë²•](#4-integration-test-ì‘ì„±ë²•)
5. [Test Coverage ê´€ë¦¬](#5-test-coverage-ê´€ë¦¬)
6. [Mock ê°ì²´ ì‚¬ìš©ë²•](#6-mock-ê°ì²´-ì‚¬ìš©ë²•)
7. [í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë° ìë™í™”](#7-í…ŒìŠ¤íŠ¸-ì‹¤í–‰-ë°-ìë™í™”)

---

## 1. í…ŒìŠ¤íŠ¸ ì² í•™ ë° ì›ì¹™

### 1.1 ì™œ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ëŠ”ê°€?

**í¬íŠ¸í´ë¦¬ì˜¤/ì·¨ì—… ì¤€ë¹„ ê´€ì **:
- âœ… **ë©´ì ‘ ì§ˆë¬¸ ëŒ€ë¹„**: "í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± ê²½í—˜ì´ ìˆë‚˜ìš”?"
- âœ… **ì½”ë“œ í’ˆì§ˆ ì¦ëª…**: Coverage 95%+ = ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì½”ë“œ
- âœ… **ë¦¬íŒ©í† ë§ ì•ˆì •ì„±**: ì½”ë“œ ë³€ê²½ ì‹œ ê¸°ì¡´ ê¸°ëŠ¥ ë³´ì¥
- âœ… **ë¬¸ì„œí™” íš¨ê³¼**: í…ŒìŠ¤íŠ¸ ì½”ë“œ =

 ì‚¬ìš© ì˜ˆì‹œ

### 1.2 í…ŒìŠ¤íŠ¸ ì‘ì„± ì›ì¹™ (F.I.R.S.T)

| ì›ì¹™ | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|
| **F**ast | ë¹ ë¥´ê²Œ ì‹¤í–‰ | ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ëŠ” 1ì´ˆ ì´ë‚´ |
| **I**ndependent | ë…ë¦½ì  ì‹¤í–‰ | í…ŒìŠ¤íŠ¸ ê°„ ì˜ì¡´ì„± ì—†ìŒ |
| **R**epeatable | ë°˜ë³µ ê°€ëŠ¥ | ì–¸ì œ ì‹¤í–‰í•´ë„ ê°™ì€ ê²°ê³¼ |
| **S**elf-Validating | ìë™ ê²€ì¦ | pass/fail ìë™ íŒë‹¨ |
| **T**imely | ì ì‹œ ì‘ì„± | ì½”ë“œ ì‘ì„± ì§í›„ í…ŒìŠ¤íŠ¸ ì‘ì„± |

### 1.3 í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ëª©í‘œ

| ë ˆì´ì–´ | ëª©í‘œ Coverage | ìš°ì„ ìˆœìœ„ |
|--------|---------------|----------|
| **Model** | 95%+ | ğŸ”¥ ìµœê³  |
| **Serializer** | 90%+ | ğŸ”¥ ìµœê³  |
| **Service** | 90%+ | ğŸ”¥ ìµœê³  |
| **Repository** | 85%+ | â­ ë†’ìŒ |
| **View/Controller** | 80%+ | â­ ë†’ìŒ |
| **Client** (ì™¸ë¶€ API) | 70%+ (Mock) | â­ ì¤‘ê°„ |

---

## 2. í…ŒìŠ¤íŠ¸ ìœ í˜• ë° ë²”ìœ„

### 2.1 í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œ

```
        â–²
       /E2E\          10% - End-to-End (ì „ì²´ ì‹œë‚˜ë¦¬ì˜¤)
      /â”€â”€â”€â”€â”€\
     /Integ-\         20% - Integration (ë ˆì´ì–´ ê°„ í†µí•©)
    / ration \
   /â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\
  / Unit Tests  \     70% - Unit (ê°œë³„ í•¨ìˆ˜/ë©”ì„œë“œ)
 /â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\
```

### 2.2 Unit Test (ë‹¨ìœ„ í…ŒìŠ¤íŠ¸)

**ëŒ€ìƒ**: ê°œë³„ í•¨ìˆ˜, ë©”ì„œë“œ, í´ë˜ìŠ¤

**ë²”ìœ„**:
- Model ë©”ì„œë“œ
- Serializer ê²€ì¦ ë¡œì§
- Service ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
- Utility í•¨ìˆ˜

**íŠ¹ì§•**:
- ë¹ ë¦„ (< 1ì´ˆ)
- ì™¸ë¶€ ì˜ì¡´ì„± ì—†ìŒ (DBëŠ” In-Memory SQLite ì‚¬ìš©)
- Mock ê°ì²´ í™œìš©

### 2.3 Integration Test (í†µí•© í…ŒìŠ¤íŠ¸)

**ëŒ€ìƒ**: ë ˆì´ì–´ ê°„ ìƒí˜¸ì‘ìš©

**ë²”ìœ„**:
- API ì—”ë“œí¬ì¸íŠ¸ (View + Serializer + Service)
- ì™¸ë¶€ ì‹œìŠ¤í…œ ì—°ë™ (OpenEMR, Orthanc) - Mock ì‚¬ìš©
- ë°ì´í„°ë² ì´ìŠ¤ íŠ¸ëœì­ì…˜

**íŠ¹ì§•**:
- ì¤‘ê°„ ì†ë„ (1~5ì´ˆ)
- DB ì‚¬ìš© (Test DB)
- ì‹¤ì œ HTTP ìš”ì²­ ì‹œë®¬ë ˆì´ì…˜

### 2.4 End-to-End Test (E2E í…ŒìŠ¤íŠ¸)

**ëŒ€ìƒ**: ì „ì²´ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤

**ë²”ìœ„**:
- "í™˜ì ë“±ë¡ â†’ ì§„ë£Œ â†’ ì²˜ë°© â†’ AI ë¶„ì„" ì „ì²´ í”Œë¡œìš°
- ì—¬ëŸ¬ API ì—°ê³„

**íŠ¹ì§•**:
- ëŠë¦¼ (5~30ì´ˆ)
- ì‹¤ì œ í™˜ê²½ê³¼ ìœ ì‚¬
- ìš°ì„ ìˆœìœ„ ë‚®ìŒ (ì„ íƒ ì‚¬í•­)

---

## 3. Unit Test ì‘ì„±ë²•

### 3.1 Django TestCase ê¸°ë³¸

```python
# acct/tests/test_models.py
from django.test import TestCase
from acct.models import User

class UserModelTest(TestCase):
    """User ëª¨ë¸ í…ŒìŠ¤íŠ¸"""

    def setUp(self):
        """ê° í…ŒìŠ¤íŠ¸ ì „ì— ì‹¤í–‰"""
        self.user = User.objects.create_user(
            username='testuser',
            password='testpass123',
            role='Doctor'
        )

    def test_create_user(self):
        """ì‚¬ìš©ì ìƒì„± í…ŒìŠ¤íŠ¸"""
        self.assertEqual(self.user.username, 'testuser')
        self.assertEqual(self.user.role, 'Doctor')
        self.assertTrue(self.user.check_password('testpass123'))

    def test_user_str_representation(self):
        """__str__ ë©”ì„œë“œ í…ŒìŠ¤íŠ¸"""
        self.assertEqual(str(self.user), 'testuser (Doctor)')

    def test_user_role_validation(self):
        """ì—­í•  ê²€ì¦ í…ŒìŠ¤íŠ¸"""
        valid_roles = ['Admin', 'Doctor', 'RIB', 'Lab', 'Nurse', 'Patient', 'External']
        self.assertIn(self.user.role, valid_roles)
```

### 3.2 Serializer ê²€ì¦ í…ŒìŠ¤íŠ¸

```python
# emr/tests/test_serializers.py
from django.test import TestCase
from emr.serializers import PatientSerializer

class PatientSerializerTest(TestCase):
    """PatientSerializer í…ŒìŠ¤íŠ¸"""

    def test_valid_data(self):
        """ìœ íš¨í•œ ë°ì´í„° ê²€ì¦"""
        data = {
            'name': 'í™ê¸¸ë™',
            'ssn': '9001011234567',
            'birth_date': '1990-01-01',
            'gender': 'M',
            'phone': '010-1234-5678',
        }
        serializer = PatientSerializer(data=data)
        self.assertTrue(serializer.is_valid())

    def test_invalid_ssn_length(self):
        """ì˜ëª»ëœ SSN ê¸¸ì´ ê²€ì¦"""
        data = {
            'name': 'í™ê¸¸ë™',
            'ssn': '123',  # ë„ˆë¬´ ì§§ìŒ
            'birth_date': '1990-01-01',
            'gender': 'M',
        }
        serializer = PatientSerializer(data=data)
        self.assertFalse(serializer.is_valid())
        self.assertIn('ssn', serializer.errors)

    def test_invalid_phone_format(self):
        """ì˜ëª»ëœ ì „í™”ë²ˆí˜¸ í˜•ì‹ ê²€ì¦"""
        data = {
            'name': 'í™ê¸¸ë™',
            'ssn': '9001011234567',
            'birth_date': '1990-01-01',
            'gender': 'M',
            'phone': '123',  # ì˜ëª»ëœ í˜•ì‹
        }
        serializer = PatientSerializer(data=data)
        self.assertFalse(serializer.is_valid())
        self.assertIn('phone', serializer.errors)

    def test_duplicate_ssn(self):
        """ì¤‘ë³µ SSN ê²€ì¦"""
        # ì²« ë²ˆì§¸ í™˜ì ìƒì„±
        Patient.objects.create(
            name='í™ê¸¸ë™',
            ssn='9001011234567',
            birth_date='1990-01-01',
            gender='M'
        )

        # ê°™ì€ SSNìœ¼ë¡œ ë‘ ë²ˆì§¸ í™˜ì ìƒì„± ì‹œë„
        data = {
            'name': 'ê¹€ì² ìˆ˜',
            'ssn': '9001011234567',  # ì¤‘ë³µ
            'birth_date': '1991-01-01',
            'gender': 'M',
        }
        serializer = PatientSerializer(data=data)
        self.assertFalse(serializer.is_valid())
        self.assertIn('ssn', serializer.errors)
```

### 3.3 Service Layer í…ŒìŠ¤íŠ¸

```python
# emr/tests/test_services.py
from django.test import TestCase
from emr.services import EMRService
from emr.models import Patient, Encounter
from acct.models import User
from utils.exceptions import BusinessLogicException, ResourceNotFoundException

class EMRServiceTest(TestCase):
    """EMRService í…ŒìŠ¤íŠ¸"""

    def setUp(self):
        self.service = EMRService()
        self.patient = Patient.objects.create(
            name='í™ê¸¸ë™',
            ssn='9001011234567',
            birth_date='1990-01-01',
            gender='M'
        )
        self.doctor = User.objects.create_user(
            username='doctor1',
            password='pass123',
            role='Doctor'
        )

    def test_create_encounter_success(self):
        """ì§„ë£Œ ê¸°ë¡ ìƒì„± ì„±ê³µ í…ŒìŠ¤íŠ¸"""
        encounter = self.service.create_encounter(
            patient_id=self.patient.id,
            doctor_id=self.doctor.id
        )
        self.assertIsNotNone(encounter)
        self.assertEqual(encounter.patient_id, self.patient.id)
        self.assertEqual(encounter.doctor_id, self.doctor.id)

    def test_create_encounter_patient_not_found(self):
        """ì¡´ì¬í•˜ì§€ ì•ŠëŠ” í™˜ìë¡œ ì§„ë£Œ ê¸°ë¡ ìƒì„± ì‹œ ì—ëŸ¬"""
        with self.assertRaises(ResourceNotFoundException) as context:
            self.service.create_encounter(
                patient_id=99999,  # ì¡´ì¬í•˜ì§€ ì•ŠìŒ
                doctor_id=self.doctor.id
            )
        self.assertEqual(context.exception.code, 'ERR_201')

    def test_create_encounter_already_in_progress(self):
        """ì´ë¯¸ ì§„ë£Œ ì¤‘ì¸ í™˜ì ì²´í¬"""
        # ì²« ë²ˆì§¸ ì§„ë£Œ ìƒì„±
        Encounter.objects.create(
            patient=self.patient,
            doctor=self.doctor,
            status='IN_PROGRESS'
        )

        # ë‘ ë²ˆì§¸ ì§„ë£Œ ìƒì„± ì‹œë„
        with self.assertRaises(BusinessLogicException) as context:
            self.service.create_encounter(
                patient_id=self.patient.id,
                doctor_id=self.doctor.id
            )
        self.assertEqual(context.exception.code, 'ERR_401')
```

---

## 4. Integration Test ì‘ì„±ë²•

### 4.1 API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸

```python
# acct/tests/test_views.py
from django.test import TestCase
from rest_framework.test import APIClient
from rest_framework import status
from acct.models import User

class LoginAPITest(TestCase):
    """ë¡œê·¸ì¸ API í…ŒìŠ¤íŠ¸"""

    def setUp(self):
        self.client = APIClient()
        self.user = User.objects.create_user(
            username='testuser',
            password='testpass123',
            role='Doctor'
        )
        self.url = '/api/acct/login/'

    def test_login_success(self):
        """ë¡œê·¸ì¸ ì„±ê³µ í…ŒìŠ¤íŠ¸"""
        data = {
            'username': 'testuser',
            'password': 'testpass123'
        }
        response = self.client.post(self.url, data, format='json')

        self.assertEqual(response.status_code, status.HTTP_200_OK)
        self.assertIn('access', response.data)
        self.assertIn('refresh', response.data)
        self.assertIn('user', response.data)
        self.assertEqual(response.data['user']['username'], 'testuser')

    def test_login_invalid_password(self):
        """ì˜ëª»ëœ ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸ ì‹œë„"""
        data = {
            'username': 'testuser',
            'password': 'wrongpass'
        }
        response = self.client.post(self.url, data, format='json')

        self.assertEqual(response.status_code, status.HTTP_401_UNAUTHORIZED)
        self.assertIn('error', response.data)
        self.assertEqual(response.data['error']['code'], 'ERR_001')

    def test_login_missing_fields(self):
        """í•„ìˆ˜ í•„ë“œ ëˆ„ë½"""
        data = {'username': 'testuser'}  # password ëˆ„ë½
        response = self.client.post(self.url, data, format='json')

        self.assertEqual(response.status_code, status.HTTP_400_BAD_REQUEST)


class PatientCRUDAPITest(TestCase):
    """í™˜ì CRUD API í…ŒìŠ¤íŠ¸"""

    def setUp(self):
        self.client = APIClient()
        self.doctor = User.objects.create_user(
            username='doctor1',
            password='pass123',
            role='Doctor'
        )
        # ë¡œê·¸ì¸ (JWT í† í° íšë“)
        response = self.client.post('/api/acct/login/', {
            'username': 'doctor1',
            'password': 'pass123'
        })
        self.token = response.data['access']
        self.client.credentials(HTTP_AUTHORIZATION=f'Bearer {self.token}')

    def test_create_patient_success(self):
        """í™˜ì ìƒì„± ì„±ê³µ"""
        data = {
            'name': 'í™ê¸¸ë™',
            'ssn': '9001011234567',
            'birth_date': '1990-01-01',
            'gender': 'M',
            'phone': '010-1234-5678',
        }
        response = self.client.post('/api/emr/patients/', data, format='json')

        self.assertEqual(response.status_code, status.HTTP_201_CREATED)
        self.assertEqual(response.data['name'], 'í™ê¸¸ë™')
        self.assertIn('id', response.data)

    def test_list_patients(self):
        """í™˜ì ëª©ë¡ ì¡°íšŒ"""
        # ìƒ˜í”Œ ë°ì´í„° ìƒì„±
        Patient.objects.create(name='í™˜ì1', ssn='9001011111111', birth_date='1990-01-01', gender='M')
        Patient.objects.create(name='í™˜ì2', ssn='9002022222222', birth_date='1990-02-02', gender='F')

        response = self.client.get('/api/emr/patients/')

        self.assertEqual(response.status_code, status.HTTP_200_OK)
        self.assertEqual(len(response.data), 2)

    def test_retrieve_patient(self):
        """í™˜ì ìƒì„¸ ì¡°íšŒ"""
        patient = Patient.objects.create(
            name='í™ê¸¸ë™',
            ssn='9001011234567',
            birth_date='1990-01-01',
            gender='M'
        )
        response = self.client.get(f'/api/emr/patients/{patient.id}/')

        self.assertEqual(response.status_code, status.HTTP_200_OK)
        self.assertEqual(response.data['name'], 'í™ê¸¸ë™')

    def test_update_patient(self):
        """í™˜ì ì •ë³´ ìˆ˜ì •"""
        patient = Patient.objects.create(
            name='í™ê¸¸ë™',
            ssn='9001011234567',
            birth_date='1990-01-01',
            gender='M'
        )
        data = {'phone': '010-9999-9999'}
        response = self.client.patch(f'/api/emr/patients/{patient.id}/', data, format='json')

        self.assertEqual(response.status_code, status.HTTP_200_OK)
        self.assertEqual(response.data['phone'], '010-9999-9999')

    def test_delete_patient(self):
        """í™˜ì ì‚­ì œ"""
        patient = Patient.objects.create(
            name='í™ê¸¸ë™',
            ssn='9001011234567',
            birth_date='1990-01-01',
            gender='M'
        )
        response = self.client.delete(f'/api/emr/patients/{patient.id}/')

        self.assertEqual(response.status_code, status.HTTP_204_NO_CONTENT)
        self.assertFalse(Patient.objects.filter(id=patient.id).exists())
```

---

## 5. Test Coverage ê´€ë¦¬

### 5.1 Coverage ë„êµ¬ ì„¤ì¹˜

```bash
pip install coverage
pip freeze > requirements.txt
```

### 5.2 Coverage ì¸¡ì •

```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ + Coverage ì¸¡ì •
coverage run --source='.' manage.py test

# Coverage ë¦¬í¬íŠ¸ ì¶œë ¥
coverage report

# HTML ë¦¬í¬íŠ¸ ìƒì„±
coverage html
# htmlcov/index.html íŒŒì¼ì„ ë¸Œë¼ìš°ì €ë¡œ ì—´ê¸°
```

### 5.3 Coverage ë¦¬í¬íŠ¸ ì˜ˆì‹œ

```
Name                      Stmts   Miss  Cover
---------------------------------------------
acct/__init__.py             0      0   100%
acct/models.py              45      2    96%
acct/serializers.py         30      1    97%
acct/services.py            80      5    94%
acct/views.py               60      8    87%
emr/models.py               50      3    94%
emr/serializers.py          40      2    95%
emr/services.py            100      8    92%
---------------------------------------------
TOTAL                      405     29    93%
```

### 5.4 Coverage ëª©í‘œ ì„¤ì •

**`.coveragerc` íŒŒì¼ ìƒì„±**:
```ini
[run]
source = .
omit =
    */migrations/*
    */tests/*
    */venv/*
    manage.py
    */settings.py

[report]
exclude_lines =
    pragma: no cover
    def __repr__
    raise AssertionError
    raise NotImplementedError
    if __name__ == .__main__.:
```

---

## 6. Mock ê°ì²´ ì‚¬ìš©ë²•

### 6.1 ì™¸ë¶€ ì‹œìŠ¤í…œ Mock (OpenEMR)

```python
# emr/tests/test_openemr_integration.py
from django.test import TestCase
from unittest.mock import patch, MagicMock
from emr.clients.openemr_client import OpenEMRClient

class OpenEMRIntegrationTest(TestCase):
    """OpenEMR ì—°ë™ í…ŒìŠ¤íŠ¸ (Mock ì‚¬ìš©)"""

    @patch('emr.clients.openemr_client.requests.post')
    def test_create_patient_in_openemr(self, mock_post):
        """OpenEMR í™˜ì ìƒì„± Mock í…ŒìŠ¤íŠ¸"""
        # Mock ì‘ë‹µ ì„¤ì •
        mock_response = MagicMock()
        mock_response.status_code = 200
        mock_response.json.return_value = {'pid': 12345}
        mock_post.return_value = mock_response

        # OpenEMR í´ë¼ì´ì–¸íŠ¸ í˜¸ì¶œ
        client = OpenEMRClient()
        patient_data = {'name': 'í™ê¸¸ë™', 'ssn': '9001011234567'}
        result = client.create_patient(patient_data)

        # ê²€ì¦
        self.assertEqual(result, 12345)
        mock_post.assert_called_once()

    @patch('emr.clients.openemr_client.requests.get')
    def test_fetch_patient_from_openemr_not_found(self, mock_get):
        """OpenEMR í™˜ì ì¡°íšŒ ì‹¤íŒ¨ Mock í…ŒìŠ¤íŠ¸"""
        # Mock ì‘ë‹µ: 404 Not Found
        mock_response = MagicMock()
        mock_response.status_code = 404
        mock_get.return_value = mock_response

        client = OpenEMRClient()
        with self.assertRaises(ResourceNotFoundException):
            client.fetch_patient(patient_id=99999)
```

### 6.2 RabbitMQ Mock

```python
# ai/tests/test_queue_service.py
from django.test import TestCase
from unittest.mock import patch, MagicMock
from ai.services import AIQueueService

class AIQueueServiceTest(TestCase):
    """AI Queue Service í…ŒìŠ¤íŠ¸ (Mock ì‚¬ìš©)"""

    @patch('ai.services.pika.BlockingConnection')
    def test_send_analysis_request(self, mock_connection):
        """AI ë¶„ì„ ìš”ì²­ ì „ì†¡ Mock í…ŒìŠ¤íŠ¸"""
        # Mock ì„¤ì •
        mock_channel = MagicMock()
        mock_connection.return_value.channel.return_value = mock_channel

        # Queue Service í˜¸ì¶œ
        service = AIQueueService()
        service.send_analysis_request(aijob_id=1, study_id='STUDY123')

        # ê²€ì¦
        mock_channel.basic_publish.assert_called_once()
```

---

## 7. í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë° ìë™í™”

### 7.1 í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ëª…ë ¹ì–´

```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
python manage.py test

# íŠ¹ì • ì•± í…ŒìŠ¤íŠ¸
python manage.py test acct

# íŠ¹ì • í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤
python manage.py test acct.tests.test_models.UserModelTest

# íŠ¹ì • í…ŒìŠ¤íŠ¸ ë©”ì„œë“œ
python manage.py test acct.tests.test_models.UserModelTest.test_create_user

# Verbose ëª¨ë“œ (ìƒì„¸ ì¶œë ¥)
python manage.py test -v 2

# ë³‘ë ¬ ì‹¤í–‰ (ì†ë„ í–¥ìƒ)
python manage.py test --parallel
```

### 7.2 í…ŒìŠ¤íŠ¸ ìë™í™” (GitHub Actions)

**`.github/workflows/django-tests.yml` íŒŒì¼ ìƒì„±**:

```yaml
name: Django Tests

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'

    - name: Install dependencies
      run: |
        cd NeuroNova_02_back_end/01_django_server
        pip install -r requirements.txt

    - name: Run tests with coverage
      run: |
        cd NeuroNova_02_back_end/01_django_server
        coverage run --source='.' manage.py test
        coverage report --fail-under=90

    - name: Upload coverage reports
      uses: codecov/codecov-action@v3
```

---

## ğŸ“š í…ŒìŠ¤íŠ¸ ì‘ì„± ì²´í¬ë¦¬ìŠ¤íŠ¸

### ìƒˆë¡œìš´ ê¸°ëŠ¥ ê°œë°œ ì‹œ
- [ ] Model í…ŒìŠ¤íŠ¸ ì‘ì„± (ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ)
- [ ] Serializer ê²€ì¦ í…ŒìŠ¤íŠ¸ (ìœ íš¨í•œ ë°ì´í„°, ì˜ëª»ëœ ë°ì´í„°)
- [ ] Service Layer í…ŒìŠ¤íŠ¸ (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, ì˜ˆì™¸ ì²˜ë¦¬)
- [ ] API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸ (ì„±ê³µ/ì‹¤íŒ¨ ì‹œë‚˜ë¦¬ì˜¤)
- [ ] ì™¸ë¶€ ì‹œìŠ¤í…œ Mock í…ŒìŠ¤íŠ¸ (í•„ìš” ì‹œ)
- [ ] Coverage 90% ì´ìƒ í™•ì¸

### ë²„ê·¸ ìˆ˜ì • ì‹œ
- [ ] ë²„ê·¸ ì¬í˜„ í…ŒìŠ¤íŠ¸ ì‘ì„± (Regression Test)
- [ ] ìˆ˜ì • í›„ í…ŒìŠ¤íŠ¸ í†µê³¼ í™•ì¸
- [ ] ê´€ë ¨ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì¬ì‹¤í–‰

---

## ğŸ“š ì°¸ê³  ë¬¸ì„œ

- **Django Testing Documentation**: https://docs.djangoproject.com/en/4.2/topics/testing/
- **DRF Testing Guide**: https://www.django-rest-framework.org/api-guide/testing/
- **Coverage.py Documentation**: https://coverage.readthedocs.io/

---

**ë¬¸ì„œ ë²„ì „**: 1.0
**ì‘ì„±ì¼**: 2025-12-28
**ëŒ€ìƒ ë…ì**: Backend ê°œë°œì
