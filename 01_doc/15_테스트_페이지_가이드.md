# 15. 테스트 페이지 사용 가이드

**문서 작성일**: 2025-12-23
**작성자**: Antigravity AI
**버전**: 1.0

---

## 📋 개요

본 문서는 CDSS 시스템의 API 및 데이터 기능을 시각적으로 검증하기 위해 제공되는 **테스트 페이지(UI)**의 사용 방법을 설명합니다. 개발자는 복잡한 API 도구(Postman, curl 등) 없이 브라우저에서 버튼 클릭만으로 주요 시나리오를 테스트할 수 있습니다.

## 🖥️ 테스트 페이지 목록

| 구분 | 파일/경로 | 설명 | 실행 방법 |
|---|---|---|---|
| **통합 대시보드** | `/api/emr/test-dashboard/` | Django 서버 내장 뷰. **환자/처방/상세항목 CRUD 전체 시나리오**를 순차적으로 테스트 가능. | 브라우저 접속 (서버 실행 필요) |
| **상세 CRUD 테스트** | `emr_crud_test.html` | AJAX를 이용한 심층적인 CRUD 테스트용 Standalone HTML 파일. | 파일 직접 열기 또는 VS Code 'Live Server' |
| **기존 UI 테스트** | `emr-test-ui.html` | 초기 개발 단계의 UI 테스트 파일. | 파일 직접 열기 |

---

## 🚀 사용 방법 상세

### 1. 통합 대시보드 (추천)
가장 최신의 API 스펙이 반영된 공식 테스트 도구입니다.

1.  **Django 서버 실행**:
    가상환경을 먼저 활성화해주세요.
    ```bash
    # Windows (PowerShell)
    .\venv\Scripts\Activate

    # 서버 실행
    python manage.py runserver 0.0.0.0:8000
    ```
2.  **브라우저 접속**: `http://localhost:8000/api/emr/test-dashboard/`
3.  **기능 확인**:
    *   **Step 1: 환자 생성** - 버튼 클릭 시 랜덤 데이터로 환자 생성 및 ID 확보
    *   **Step 2: 처방 생성** - 확보된 환자 ID로 타겟 약품 처방 내리기
    *   **Step 3: 항목 수정** - 처방 약품의 투여량(Dosage) 변경 테스트 (PATCH)
    *   **Step 4: 항목 삭제** - 처방 약품 삭제 테스트 (DELETE)

### 2. Standalone HTML 파일 (`emr_crud_test.html`)
서버 재시작 없이 프론트엔드 로직만 빠르게 수정하거나 테스트할 때 유용합니다.

1.  **위치**: `NeuroNova_02_back_end/01_django_server/emr_crud_test.html`
2.  **실행**:
    *   탐색기에서 더블 클릭하여 크롬/엣지 등 브라우저로 열기.
    *   *주의*: CORS(Cross-Origin) 에러가 발생할 수 있으므로, 가능한 VS Code의 **Live Server** 확장 프로그램을 사용하는 것을 권장합니다.
3.  **기능**:
    *   API 엔드포인트(`http://localhost:8000/api/...`)를 직접 호출하여 응답을 JSON 형태로 화면에 출력합니다.

---

## ✅ 트러블슈팅

**Q: HTML 파일에서 Fetch API 호출 시 CORS 에러 발생**
*   **원인**: 로컬 파일(`file://`)에서 `localhost` 서버로 요청을 보낼 때 브라우저 보안 정책에 의해 차단될 수 있습니다.
*   **해결**: `django-cors-headers`가 서버에 설정되어 있는지 확인하거나, **통합 대시보드**(`test-dashboard`)를 사용하세요 (같은 도메인이므로 CORS 문제 없음).

**Q: 401 Unauthorized 에러**
*   **원인**: 인증이 필요한 API를 호출했습니다.
*   **해결**: 현재 테스트용 API는 개발 모드(`AllowAny`)로 열려 있으나, 만약 인증이 필요해진다면 `Authorization` 헤더를 추가해야 합니다.
