# CDSS 프로젝트 일일 체크리스트

**작성일**: 2025-12-19
**버전**: 1.0

---

## 📋 목차

1. [작업 시작 전 체크리스트](#1-작업-시작-전-체크리스트)
2. [코드 작성 중 체크리스트](#2-코드-작성-중-체크리스트)
3. [커밋 전 체크리스트](#3-커밋-전-체크리스트)
4. [Pull Request 전 체크리스트](#4-pull-request-전-체크리스트)
5. [테스트 체크리스트](#5-테스트-체크리스트)
6. [배포 전 체크리스트](#6-배포-전-체크리스트)
7. [작업 종료 전 체크리스트](#7-작업-종료-전-체크리스트)

---

## 1. 작업 시작 전 체크리스트

### 환경 확인
- [ ] Git 최신 상태 확인 (`git pull origin develop`)
- [ ] 작업할 브랜치 생성 또는 이동 (`git checkout -b feature/UC1-login`)
- [ ] 가상 환경 활성화 확인
  - Backend: `source venv/bin/activate` (Windows: `venv\Scripts\activate`)
  - Frontend: Node.js 버전 확인 (`node -v`, `npm -v`)

### 의존성 확인
- [ ] Backend: `pip list` 확인, 필요시 `pip install -r requirements.txt`
- [ ] Frontend: `npm list` 확인, 필요시 `npm install`
- [ ] Docker 서비스 실행 확인 (MySQL, Redis, RabbitMQ 등)
  ```bash
  docker-compose ps  # 모든 컨테이너 UP 상태 확인
  ```

### 작업 계획 확인
- [ ] [03_개발_작업_순서.md](03_개발_작업_순서.md) 에서 오늘 작업 항목 확인
- [ ] GitHub Issues 또는 Jira 티켓 확인
- [ ] 관련 문서 읽기 (UC 명세서, API 문서 등)

---

## 2. 코드 작성 중 체크리스트

### Backend (Django)
- [ ] **Type Hints 사용**: 함수 파라미터 및 반환 타입 명시
  ```python
  def get_patient(patient_id: int) -> Patient:
      pass
  ```
- [ ] **권한 체크**: `@permission_classes` 데코레이터 적용
  ```python
  @permission_classes([IsAuthenticated, IsDoctor])
  def view(request):
      pass
  ```
- [ ] **감사 로그**: 중요 액션은 `AuditClient.log_event()` 호출
- [ ] **에러 처리**: try-except 블록으로 예외 처리
- [ ] **ORM 최적화**: `select_related`, `prefetch_related` 사용

### Frontend (React + TypeScript)
- [ ] **TypeScript 타입 정의**: 컴포넌트 Props, API 응답 타입 정의
  ```typescript
  interface LoginFormProps {
    onSubmit: (data: LoginRequest) => void;
  }
  ```
- [ ] **Tailwind CSS 사용**: 인라인 유틸리티 클래스 활용
- [ ] **Zustand 스토어**: 상태 관리 로직 분리
- [ ] **에러 처리**: API 호출 시 try-catch 및 사용자 알림
- [ ] **접근성**: ARIA 속성 추가 (`aria-label`, `role` 등)

### 공통
- [ ] **코딩 스타일 준수**
  - Backend: PEP 8
  - Frontend: ESLint Airbnb
- [ ] **주석 작성**: 복잡한 로직에 주석 추가 (과도한 주석 지양)
- [ ] **환경 변수 사용**: 하드코딩 금지, `.env` 파일 활용

---

## 3. 커밋 전 체크리스트

### 코드 품질
- [ ] **린트 검사 통과**
  - Backend: `flake8 .`, `pylint app/`
  - Frontend: `npm run lint`
- [ ] **포매팅 적용**
  - Backend: `black .`, `isort .`
  - Frontend: `npm run format` (Prettier)
- [ ] **타입 체크 통과** (TypeScript)
  ```bash
  npx tsc --noEmit
  ```

### 테스트
- [ ] **단위 테스트 작성 및 통과**
  - Backend: `pytest tests/`
  - Frontend: `npm test`
- [ ] **커버리지 확인** (최소 80% 목표)
  ```bash
  pytest --cov=app tests/
  ```

### 의존성 관리
- [ ] **Backend**: 새 패키지 설치 시 `requirements.txt` 업데이트
  ```bash
  pip freeze > requirements.txt
  ```
- [ ] **Frontend**: `package.json` 및 `package-lock.json` 자동 업데이트 확인

### 보안
- [ ] **민감 정보 제외**: `.env` 파일, API 키, 비밀번호 커밋 금지
- [ ] **`.gitignore` 확인**: 불필요한 파일 제외 (node_modules, __pycache__ 등)
- [ ] **SQL Injection, XSS 등 취약점 검토**

### Git 상태
- [ ] `git status`로 변경 파일 확인
- [ ] 불필요한 파일 제외 (`git reset` 또는 `.gitignore` 추가)
- [ ] **Conventional Commits** 형식으로 커밋 메시지 작성
  ```bash
  git commit -m "feat(UC1): Add login API endpoint"
  git commit -m "fix(UC5): Resolve DICOM image loading issue"
  git commit -m "docs: Update README with environment setup"
  ```

---

## 4. Pull Request 전 체크리스트

### 코드 리뷰 준비
- [ ] **브랜치 최신화**: `git pull origin develop` 후 리베이스
  ```bash
  git fetch origin
  git rebase origin/develop
  ```
- [ ] **충돌 해결**: 머지 충돌 없는지 확인
- [ ] **커밋 정리**: 불필요한 커밋 squash (선택)

### 문서화
- [ ] **README 업데이트**: 새로운 기능 추가 시 문서 수정
- [ ] **API 명세서 업데이트**: 새로운 엔드포인트 추가 시 [08_API_명세서.md](08_API_명세서.md) 수정
- [ ] **CHANGELOG 작성**: 주요 변경 사항 기록

### 테스트
- [ ] **전체 테스트 통과**
  - Backend: `pytest`
  - Frontend: `npm test`
- [ ] **E2E 테스트 통과** (중요 기능)
  ```bash
  npx playwright test
  ```
- [ ] **통합 테스트**: Docker Compose 환경에서 수동 테스트

### PR 작성
- [ ] **제목**: `[UC번호] 간결한 설명` (예: `[UC1] Add JWT authentication`)
- [ ] **설명**:
  - 변경 사항 요약
  - 관련 이슈 번호 (`Closes #123`)
  - 스크린샷 (UI 변경 시)
  - 테스트 방법
- [ ] **리뷰어 지정**: 시니어 개발자, 팀 리드 등

---

## 5. 테스트 체크리스트

### 단위 테스트 (Unit Test)
- [ ] **Backend (pytest)**
  ```bash
  pytest tests/unit/  # 단위 테스트만 실행
  pytest tests/unit/test_auth.py  # 특정 파일만
  ```
- [ ] **Frontend (Vitest)**
  ```bash
  npm test  # 전체 테스트
  npm test -- LoginForm.test.tsx  # 특정 컴포넌트
  ```

### 통합 테스트 (Integration Test)
- [ ] **API 엔드포인트 테스트** (Postman 또는 pytest)
  - [ ] UC1: 로그인 `/api/auth/login/`
  - [ ] UC2: 환자 조회 `/api/patients/{id}/`
  - [ ] UC5: DICOM 조회 `/api/ris/studies/`
- [ ] **외부 시스템 연동**
  - [ ] OpenEMR API 호출 성공
  - [ ] Orthanc DICOMweb 연동 성공
  - [ ] HAPI FHIR 리소스 조회 성공

### E2E 테스트 (End-to-End Test)
- [ ] **Playwright 시나리오 실행**
  ```bash
  npx playwright test tests/e2e/login.spec.ts
  ```
- [ ] **역할별 사용자 플로우** (수동 테스트)
  - [ ] Admin: 사용자 관리, 시스템 설정
  - [ ] Doctor: 환자 조회, 처방 입력, AI 분석 요청
  - [ ] RIB: 영상 조회, 판독문 작성
  - [ ] Lab: 검사 결과 입력
  - [ ] Nurse: 환자 바이탈 입력
  - [ ] Patient (Flutter): 본인 정보 조회, 예약 확인

### 성능 테스트
- [ ] **API 응답 시간**: 평균 < 500ms, 95th percentile < 1s
- [ ] **동시 사용자**: 100명 동시 접속 시 정상 동작
- [ ] **AI 추론 시간**: MRI 분석 < 30초

### 보안 테스트
- [ ] **권한 체크**: 다른 역할로 접근 시 403 Forbidden
- [ ] **토큰 만료**: Access Token 만료 후 401 Unauthorized
- [ ] **SQL Injection**: 입력 값 검증 (`' OR 1=1--` 등)
- [ ] **XSS**: `<script>` 태그 입력 시 이스케이프 처리

---

## 6. 배포 전 체크리스트

### 환경 설정
- [ ] **환경 변수 검증**: `.env.production` 파일 확인
  - [ ] `DEBUG=False` (Django)
  - [ ] `SECRET_KEY` 변경 (기본값 사용 금지)
  - [ ] 데이터베이스 URL, Redis URL 등 프로덕션 값 설정
- [ ] **CORS 설정**: 프로덕션 도메인만 허용
  ```python
  CORS_ALLOWED_ORIGINS = ['https://cdss.hospital.com']
  ```

### 빌드
- [ ] **Backend**: 정적 파일 수집
  ```bash
  python manage.py collectstatic --noinput
  ```
- [ ] **Frontend**: 프로덕션 빌드
  ```bash
  npm run build  # build/ 폴더 생성 확인
  ```
- [ ] **Docker 이미지 빌드**
  ```bash
  docker-compose -f docker-compose.prod.yml build
  ```

### 데이터베이스
- [ ] **마이그레이션 적용**
  ```bash
  python manage.py migrate
  ```
- [ ] **초기 데이터 로드** (역할, 권한 등)
  ```bash
  python manage.py loaddata initial_data.json
  ```
- [ ] **백업 확인**: 배포 전 DB 백업

### 인프라
- [ ] **Docker Compose 실행**
  ```bash
  docker-compose -f docker-compose.prod.yml up -d
  ```
- [ ] **Nginx 설정 검증**
  ```bash
  nginx -t
  sudo systemctl reload nginx
  ```
- [ ] **SSL 인증서 확인**: Cloudflare 또는 Let's Encrypt

### 모니터링
- [ ] **Prometheus 메트릭 수집 확인**
  - 접속: `http://prometheus.cdss.hospital.com:9090`
- [ ] **Grafana 대시보드 확인**
  - 접속: `http://grafana.cdss.hospital.com:3000`
- [ ] **Alertmanager 알림 설정**
  - Slack Webhook 또는 이메일 설정

### 헬스 체크
- [ ] **API 헬스 체크**: `curl http://localhost:8000/health/`
- [ ] **WebSocket 연결**: 실시간 알림 테스트
- [ ] **외부 시스템 연동**
  - OpenEMR, Orthanc, HAPI FHIR 연결 확인

---

## 7. 작업 종료 전 체크리스트

### 코드 정리
- [ ] **주석 제거**: 디버깅용 `console.log`, `print` 문 삭제
- [ ] **사용하지 않는 코드 제거**: Dead code, 임포트 제거
- [ ] **TODO 주석 정리**: 남은 작업은 GitHub Issues로 이동

### 문서화
- [ ] **작업 내용 기록**: 오늘 작업한 내용 요약
- [ ] **이슈 업데이트**: GitHub Issues 또는 Jira 상태 변경
- [ ] **팀 공유**: Slack에 완료 사항 알림

### 의존성 동기화
- [ ] **Backend**: `pip freeze > requirements.txt` 실행 확인
- [ ] **Frontend**: `package.json` 변경 사항 확인
- [ ] **Docker**: `docker-compose.yml` 변경 시 팀 공유

### Git
- [ ] **Push**: `git push origin feature/UC1-login`
- [ ] **PR 생성**: Pull Request 생성 및 리뷰어 지정
- [ ] **브랜치 정리**: 머지된 브랜치 삭제 (로컬, 리모트)

### 환경 정리
- [ ] **가상 환경 비활성화**: `deactivate` (Backend)
- [ ] **Docker 중지** (선택): `docker-compose down`
- [ ] **IDE 닫기 전 저장**: 모든 파일 저장 확인

---

## 📌 주간 체크리스트 (금요일)

### 코드 리뷰
- [ ] 이번 주 작성한 코드 자체 리뷰
- [ ] 팀원 PR 리뷰 완료

### 테스트
- [ ] 전체 테스트 스위트 실행 및 통과 확인
- [ ] E2E 테스트 전체 시나리오 실행

### 문서
- [ ] README, API 명세서 최신 상태 확인
- [ ] CHANGELOG 업데이트

### 회의
- [ ] 주간 회의 참석 (진행 상황 공유)
- [ ] 다음 주 작업 계획 수립

---

## 📌 월간 체크리스트 (매월 마지막 금요일)

### 의존성 업데이트
- [ ] Backend: `pip list --outdated` 확인 후 업데이트
- [ ] Frontend: `npm outdated` 확인 후 업데이트
- [ ] Docker 이미지 업데이트 (보안 패치)

### 성능 리뷰
- [ ] Grafana 대시보드 리뷰 (API RPS, 응답 시간)
- [ ] 데이터베이스 쿼리 최적화 필요 항목 확인

### 보안 감사
- [ ] Django 보안 체크: `python manage.py check --deploy`
- [ ] npm 보안 감사: `npm audit`
- [ ] 사용하지 않는 계정 삭제

### 백업
- [ ] 데이터베이스 백업 확인
- [ ] MinIO (S3) 백업 확인
- [ ] 환경 변수 파일 백업

---

## ⚠️ 주의사항

### 절대 하지 말아야 할 것
- ❌ **테스트 없이 배포**: 반드시 전체 테스트 통과 확인
- ❌ **커밋 전 린트 미실행**: 코드 품질 저하
- ❌ **requirements.txt 미업데이트**: 팀원 환경 불일치
- ❌ **DEBUG=True 배포**: 프로덕션 보안 취약점
- ❌ **민감 정보 커밋**: API 키, 비밀번호 등

### 권장 사항
- ✅ **작은 커밋 자주**: 큰 커밋보다 작은 커밋 여러 개
- ✅ **매일 Push**: 로컬에만 보관하지 말고 리모트에 백업
- ✅ **리뷰 요청 빠르게**: PR 생성 후 즉시 리뷰어 지정
- ✅ **문서화 습관**: 코드 작성과 동시에 문서 업데이트

---

**Last Updated**: 2025-12-19
**Version**: 1.0
**Author**: Claude AI
