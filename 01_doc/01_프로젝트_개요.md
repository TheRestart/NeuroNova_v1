# 01. CDSS 프로젝트 개요

**프로젝트명**: CDSS - Clinical Decision Support System (임상 의사결정 지원 시스템)
**개발 기간**: 16주 (4개월)
**개발 방식**: AI 협업 개발 (Claude AI + 사용자)
**최종 수정일**: 2025-12-22

---

## 📋 목차

1. [프로젝트 소개](#프로젝트-소개)
2. [시스템 구성](#시스템-구성)
3. [기술 스택](#기술-스택)
4. [빠른 시작](#빠른-시작)
5. [Git 저장소 구조](#git-저장소-구조)
6. [문서 네비게이션](#문서-네비게이션)

---

## 프로젝트 소개

### 개요
CDSS는 신경외과 중심의 임상 의사결정 지원 시스템으로, AI 기반 MRI 영상 분석과 외부 의료 시스템 통합을 통해 의료진의 진단 및 치료 결정을 지원합니다.

### 핵심 특징
- **9개 UC 모듈**: 인증, EMR, 처방, 검사, 영상, AI, 알림, FHIR, 감사
- **7개 사용자 역할**: Admin, Doctor, RIB, Lab, Nurse, Patient, External
- **외부 시스템 통합**: OpenEMR, Orthanc PACS, HAPI FHIR
- **AI 오케스트레이션**: MRI 종양 분석, Omics 분석

---

## 시스템 구성

### 핵심 기능 (9개 UC 모듈)

| UC | 모듈명 | 설명 | 주요 기능 |
|---|---|---|---|
| **UC1** | ACCT | 인증/권한 관리 | JWT 인증, RBAC (7개 역할), MFA |
| **UC2** | EMR | 전자의무기록 프록시 | OpenEMR 연동, 환자 데이터 캐싱 |
| **UC3** | OCS | 처방전달시스템 | 처방 생성, 약물 정보 관리 |
| **UC4** | LIS | 임상병리정보시스템 | 검사 오더, 결과 조회 |
| **UC5** | RIS | 영상의학정보시스템 | Orthanc 연동, DICOM Viewer |
| **UC6** | AI | AI 오케스트레이션 | MRI 분석, 비동기 Job Queue |
| **UC7** | ALERT | 타임라인/알림 | 실시간 알림, WebSocket |
| **UC8** | FHIR | 의료정보 교환 | HAPI FHIR 연동, 리소스 변환 |
| **UC9** | AUDIT | 감사/보안 로그 | 액션 추적, 보안 이벤트 |

### 사용자 역할 (7개)

| 역할 | 설명 | 주요 권한 |
|---|---|---|
| **Admin** | 시스템 관리자 | 모든 권한, 사용자 관리 |
| **Doctor** | 신경외과 의사 | 진단, 처방, AI 결과 승인 |
| **RIB** | 방사선과 | 영상 업로드, 판독문 작성 |
| **Lab** | 검사실 | 검사 결과 입력 |
| **Nurse** | 간호사 | 바이탈 입력, 알림 확인 |
| **Patient** | 일반 환자 | 본인 데이터만 조회 (Self Access) |
| **External** | 외부 기관 | FHIR API 접근 |

---

## 기술 스택

### Frontend
- **React Web** (의료진용)
  - TypeScript 5.x, Tailwind CSS 3.x
  - Zustand (상태 관리), shadcn/ui (컴포넌트)
  - 역할별 테마 색상, 7개 역할 전체 지원
- **Flutter Mobile** (환자 전용)
  - Dart, Material Design
  - 환자 조회, 알림, 간단한 영상 조회

### Backend
- **Django 4.2 LTS**: REST API 서버
- **Celery + RabbitMQ**: 비동기 작업 (AI, FHIR 큐)
- **Django Channels**: WebSocket (실시간 알림)

### Database & Storage
- **MySQL 8.0**: 메인 데이터베이스
- **Redis 7.x**: 캐시 + Session + Channel Layer
- **MinIO**: S3 호환 객체 스토리지 (AI Artifacts)

### AI & ML
- **Flask + GPU**: AI 추론 서버 (MRI 종양 분석, Omics 분석)
- **RabbitMQ**: AI Job Queue

### Infrastructure
- **Docker + Docker Compose**: 컨테이너화
- **Nginx**: Reverse Proxy
- **Cloudflare**: CDN + DDoS + SSL/TLS
- **Prometheus + Grafana**: 모니터링

### 외부 시스템 (상용)
- **OpenEMR**: 전자의무기록 (REST API)
- **Orthanc**: DICOM PACS 서버 (DICOMweb)
- **HAPI FHIR**: HL7 FHIR R4 서버

---

## 빠른 시작

### 📦 사전 준비

**필수 소프트웨어:**
- Python 3.13+
- Node.js 18+
- MySQL 8.0+ (또는 MariaDB 11+)
- Docker & Docker Compose

### 🚀 1. 프로젝트 클론

```bash
# 메인 저장소 (문서 + UML)
git clone https://github.com/TheRestart/NeuroNova_v1.git
cd NeuroNova_v1

# 백엔드 저장소
cd NeuroNova_02_back_end
git clone https://github.com/TheRestart/NeuroNova_02_back_end.git .

# React 프론트엔드 저장소
cd ../NeuroNova_03_front_end_react
git clone https://github.com/TheRestart/NeuroNova_03_front_end_react.git .

# Flutter 프론트엔드 저장소
cd ../NeuroNova_04_front_end_flutter
git clone https://github.com/TheRestart/NeuroNova_04_front_end_flutter.git .
```

### 🐳 2. Docker 서비스 시작

#### OpenEMR 시작
```bash
cd NeuroNova_02_back_end/openemr-docker
docker-compose up -d

# 접속: http://localhost:80
# 사용자: admin / 비밀번호: pass
```

### 🔧 3. Django 백엔드 실행

```bash
cd NeuroNova_02_back_end/01_django_server

# 가상환경 생성 및 활성화
python -m venv venv
venv\Scripts\activate  # Windows
# source venv/bin/activate  # macOS/Linux

# 의존성 설치
pip install -r requirements.txt

# .env 파일 설정
cp .env.example .env
# .env 파일을 열어서 실제 값 입력

# 데이터베이스 마이그레이션
python manage.py migrate

# 테스트 사용자 생성 (7개 역할)
python manage.py shell < create_test_users.py

# 서버 실행
python manage.py runserver
```

**접속:** http://localhost:8000

### ⚛️ 4. React 프론트엔드 실행

```bash
cd NeuroNova_03_front_end_react/01_react_client

# 의존성 설치
npm install

# .env 파일 설정
cp .env.example .env

# 개발 서버 실행
npm start
```

**접속:** http://localhost:3000

### 📱 5. Flutter 모바일 앱 (선택)

```bash
cd NeuroNova_04_front_end_flutter

# 의존성 설치
flutter pub get

# 앱 실행 (Android/iOS 에뮬레이터 필요)
flutter run
```

### ✅ 서비스 확인

**모든 서비스가 정상 실행되었다면:**

1. ✅ **OpenEMR**: http://localhost:80
2. ✅ **Django API**: http://localhost:8000/api/emr/health/
3. ✅ **React Web**: http://localhost:3000
4. ✅ **Flutter App**: 에뮬레이터/실제 기기

---

## Git 저장소 구조

본 프로젝트는 **4개의 독립된 Git 저장소**로 관리됩니다:

### 1. 메인 저장소 (`NeuroNova_v1`)
- **용도**: 문서 + UML 설계 파일
- **URL**: https://github.com/TheRestart/NeuroNova_v1.git
- **구조**:
  ```
  NeuroNova_v1/
  ├── 00_UML/              # UML 설계 파일
  ├── 01_doc/              # 프로젝트 문서
  ├── README.md
  └── start_project.*      # 시작 스크립트
  ```

### 2. 백엔드 저장소 (`NeuroNova_02_back_end`)
- **용도**: Django REST API 서버
- **URL**: https://github.com/TheRestart/NeuroNova_02_back_end.git
- **구조**:
  ```
  NeuroNova_02_back_end/
  ├── 01_django_server/    # Django 프로젝트
  │   ├── acct/            # UC1: 인증/권한
  │   ├── emr/             # UC2: EMR Proxy
  │   ├── alert/           # UC7: 알림
  │   └── audit/           # UC9: 감사 로그
  └── 02_openemr_server/   # OpenEMR Docker
  ```

### 3. React 프론트엔드 저장소 (`NeuroNova_03_front_end_react`)
- **용도**: 의료진용 웹 애플리케이션
- **URL**: https://github.com/TheRestart/NeuroNova_03_front_end_react.git
- **구조**:
  ```
  NeuroNova_03_front_end_react/
  └── 01_react_client/     # React 앱
      ├── src/
      │   ├── components/  # UI 컴포넌트
      │   ├── stores/      # Zustand 스토어
      │   └── types/       # TypeScript 타입
      └── package.json
  ```

### 4. Flutter 프론트엔드 저장소 (`NeuroNova_04_front_end_flutter`)
- **용도**: 환자 전용 모바일 앱
- **URL**: https://github.com/TheRestart/NeuroNova_04_front_end_flutter.git

### Git 작업 플로우

**각 저장소는 독립적으로 커밋/푸시합니다:**

```bash
# 백엔드 작업 후
cd NeuroNova_02_back_end
git add .
git commit -m "feat: UC2 EMR 프록시 구현"
git push origin main

# 프론트엔드 작업 후
cd ../NeuroNova_03_front_end_react
git add .
git commit -m "feat: 로그인 페이지 구현"
git push origin main

# 문서 수정 후 (메인 저장소)
cd ..
git add 01_doc/
git commit -m "docs: API 명세서 업데이트"
git push origin main
```

---

## 문서 네비게이션

### 📚 핵심 문서 (읽는 순서대로)

| 번호 | 문서명 | 설명 | 대상 |
|---|---|---|---|
| **01** | [프로젝트_개요.md](01_프로젝트_개요.md) | 이 문서 | 전체 |
| **02** | [세부_계획서.md](02_세부_계획서.md) | 인프라 구성 상세 | DevOps |
| **03** | [개발_작업_순서.md](03_개발_작업_순서.md) | 4주 개발 계획 | 개발자 |
| **04** | [수정_지침서.md](04_수정_지침서.md) | 수정 요청 템플릿 | 사용자 |
| **05** | [기술스택_상세.md](05_기술스택_상세.md) | 기술 스택 설명 | 개발자 |
| **06** | [환경설정_가이드.md](06_환경설정_가이드.md) | 가상환경, 의존성, 개발 모드 | 개발자 ⭐ |
| **07** | [일일_체크리스트.md](07_일일_체크리스트.md) | 일일 개발 체크리스트 | 개발자 |
| **08** | [API_명세서.md](08_API_명세서.md) | REST API 명세 | 개발자, QA |
| **09** | [데이터베이스_스키마.md](09_데이터베이스_스키마.md) | DB 스키마, ERD | DB 팀 |
| **10** | [테스트_시나리오.md](10_테스트_시나리오.md) | 테스트 시나리오 | QA |
| **11** | [배포_가이드.md](11_배포_가이드.md) | Docker 배포 | DevOps |
| **12** | [보안_아키텍처_정책.md](12_보안_아키텍처_정책.md) | 보안 정책 | 전체 ⭐ |

### 📖 참고 문서

| 문서명 | 설명 |
|---|---|
| [REF_CLAUDE_CONTEXT.md](REF_CLAUDE_CONTEXT.md) | Claude AI 온보딩 가이드 |
| [REF_PROJECT_STRUCTURE.md](REF_PROJECT_STRUCTURE.md) | 디렉토리 구조 설명 |
| [REF_GIT_SETUP_GUIDE.md](REF_GIT_SETUP_GUIDE.md) | Git 설정 가이드 |
| [REF_UML_사용법.md](REF_UML_사용법.md) | UML 다이어그램 사용법 |
| [REF_프롬프트.md](REF_프롬프트.md) | Claude AI 프롬프트 모음 |

### 📝 작업 로그

| 문서명 | 설명 |
|---|---|
| [LOG_작업이력.md](LOG_작업이력.md) | 주차별 작업 완료 보고서 |

### 🗂️ 기타

| 문서명 | 설명 |
|---|---|
| [업무계획서.md](업무계획서.md) | 전체 업무 계획 (방대) |

---

## 🔒 보안 원칙

### Django 중앙 인증 정책

**모든 외부 시스템 접근은 반드시 Django를 경유해야 합니다.**

#### ✅ 올바른 구조
```
Client → Nginx → Django (인증/권한) → 외부 시스템 (OpenEMR, Orthanc, HAPI FHIR)
                    ↓
                감사 로그 기록
```

#### ❌ 잘못된 구조 (금지!)
```
Client → Nginx → 외부 시스템 (직접 연결) ← 금지!
```

### 개발 모드

**빠른 테스트를 위한 보안 토글 기능:**

```bash
# .env 파일
ENABLE_SECURITY=False  # 개발 모드 (인증/권한 우회)
# ENABLE_SECURITY=True  # 프로덕션 모드
```

**자세한 내용**: [06_환경설정_가이드.md](06_환경설정_가이드.md#개발-모드)

---

## 📞 지원 및 문의

### Claude AI에게 작업 요청 시

```
[03_개발_작업_순서.md]를 읽고 Week 2의 작업을 시작해줘.
```

### 수정 요청 시

```
[04_수정_지침서.md]의 [수정 템플릿]을 참고해서
UC1의 JWT 토큰 만료 시간을 30분으로 변경해줘.
```

### 새로운 Claude 인스턴스 시작 시

```
[REF_CLAUDE_CONTEXT.md]를 먼저 읽고 프로젝트를 이해한 후,
[LOG_작업이력.md]에서 현재 진행 상황을 확인해줘.
```

---

## 📌 개발 규칙

### 아키텍처 원칙
1. **7-Layer Architecture**: Controller → Service → Repository/Client
2. **RBAC**: 7개 역할 기반 접근 제어
3. **Self Access**: Patient는 본인 데이터만 조회
4. **비동기 처리**: AI, FHIR 작업은 RabbitMQ 큐 사용
5. **감사 로그**: 모든 중요 액션은 `AuditClient.log_event()` 호출

### Git 커밋 메시지 규칙
```
feat: UC1 사용자 인증 API 구현
fix: Patient 권한 체크 버그 수정
docs: API 문서 Swagger 추가
test: UC3 처방 생성 테스트 추가
refactor: EMR Client 코드 정리
```

---

**프로젝트 버전**: 1.0
**최종 수정**: 2025-12-22
**작성자**: Claude AI + Project Team
