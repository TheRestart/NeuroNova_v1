# CDSS 시스템 개발 업무 계획서

**최종 수정일**: 2025-12-24
**프로젝트명**: Clinical Decision Support System (CDSS)

> [!NOTE]
> 시스템 아키텍처, 상세 모듈 설계, 기술 스택 등 기술 참조 정보는 **[REF_CLAUDE_CONTEXT.md](REF_CLAUDE_CONTEXT.md)**를 참조하십시오. 이 문서는 향후 개발 로드맵, 외부 시스템 연동 계획, 위험 관리 및 일정 중심의 정보를 관리합니다.

---

## 📅 개발 로드맵 및 우선순위

### Phase 3: 고급 기능 및 통합 (Week 5-10) - **현재 진행 중**
- **UC7 (ALERT)**: 실시간 알림 시스템 (WebSocket/Channels)
- **UC9 (AUDIT)**: 전역 미들웨어 기반 비즈니스 로깅 고도화
- **UC4 (LIS)**: 임상병리 마스터 데이터 업로드 및 검사 결과 연동
- **AI Core 통합**: Flask 추론 서버 연동 및 RabbitMQ Worker 연동

### Phase 4: 외부 연동 및 고도화 (Week 11-14)
- **UC8 (FHIR)**: HAPI FHIR 서버 연동 및 리소스 양방향 동기화
- **Mobile 앱 (Flutter)**: 환자용 앱 초기 설정 및 프로필/진료 내역 조회
- **DICOM Viewer**: React 기반 웹 뷰어 고도화

### Phase 5: 안정화 및 배포 (Week 15-16)
- **보안 감사**: 개인정보 접근 제어 및 권한 우회 철저 검증
- **부하 테스트**: 동시 접속자 처리 및 AI 추론 병목 구간 최적화
- **운영 매뉴얼**: 의료진 및 시스템 관리자 교육 자료 작성

---

## 🏥 외부 시스템 연동 확인 사항

### 3.1 OpenEMR (현황: 병렬 이중 쓰기 적용 완료)
- [x] API 접근 권한 및 DB 직접 접근 설정
- [x] `persistence_status` 기반의 데이터 정합성 보고 체계 검증
- [ ] 대용량 트래픽 발생 시 OpenEMR DB 영향도 평가

### 3.2 Orthanc (DICOM)
- [x] Orthanc PACS Docker 구동 및 API 연결 확인
- [ ] DICOMweb 플러그인 (WADO-RS) 성능 미세 조정
- [ ] 영상 판독문 서명 워크플로우(RadiologyReport) 현장 검증

### 3.3 HAPI FHIR (상용 서버)
- [ ] OAuth 2.0 (SMART on FHIR) 인증 연동
- [x] CDSS 리소스 ↔ FHIR 표준 리소스 간 매핑 테이블 확정 ✅
  - **구현 완료 (2026-01-02)**: 9개 FHIR Converter 구현
    - `converters.py`: Patient, Encounter, Observation, DiagnosticReport
    - `converters_extended.py`: MedicationRequest, ServiceRequest, Condition, ImagingStudy, Procedure
  - **Patient-DICOM-FHIR 매핑 체인 완료**:
    - Patient ↔ DICOM: `RadiologyStudyService.sync_studies_from_orthanc()` (3단계 매칭)
    - DICOM → FHIR: `ImagingStudyConverter.to_fhir()` (StudyInstanceUID 포함)
    - Patient → FHIR: `PatientConverter.to_fhir()` (FHIR R4 표준)
  - 상세: [47_FHIR_동기화_Outbox_패턴_명세서.md](47_FHIR_동기화_Outbox_패턴_명세서.md)

---

## 👥 팀별 작업 범위 (R&R 요약)

- **Backend (Django)**: 7-Layer Architecture 기반 비즈니스 로직 및 외부 시스템 연동
- **AI Team**: AI 모델 개발 및 인터페이스 규격(Spec) 정의 (05_ai_core 영역)
- **Frontend (React/Flutter)**: 역할 기반(RBAC) UI 구현 및 실시간 알림 연동
- **DevOps**: Docker 인프라, RabbitMQ/Redis 브로커 관리, 모니터링(Prometheus/Grafana)

---

## 🚨 위험 요소 및 대응 방안

1. **외부 서버 장애**: OpenEMR 또는 HAPI FHIR 장애 시 `persistence_status`를 통해 사용자에게 투명하게 알리고, 추후 재시도(Retry) 가능한 큐 인프라 활용.
2. **DICOM 로딩 병목**: 대용량 DICOM 데이터 전송 시 Progressive Loading 및 클라이언트 캐싱 전략 적용.
3. **AI 추론 성능**: 복잡한 MRI 분석 시 RabbitMQ 비동기 큐를 활용하여 웹 서버 응답성(Responsiveness) 유지.

---

## 부록: 중요 체크리스트

- [ ] `ENABLE_SECURITY=True` 전환 전 전체 권한 테스트 (Doctor, Nurse, Patient 등)
- [ ] 환자 개인정보(PII) 데이터 암호화 저장 및 전송 구간 SSL 필히 적용
- [ ] AI 추론 결과의 신뢰도(Confidence Score) 하계치 설정 및 의사 최종 승인 루프 확인
